<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medieval Library - Comprehensive Template</title>
            <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Uncial+Antiqua&display=swap" rel="stylesheet">
    <style>
        /* ======================
           üìã GLOBAL RESET & BASE STYLES
           ====================== 
           
           PURPOSE: Sets up the foundation for the entire page
           CUSTOMIZE: Change font families, base colors, background gradients
           
           Key Variables:
           - Primary Gold: #d4af37
           - Light Gold: #f4e4bc  
           - Dark Gold: #b8860b
           - Team Colors: Defined in JavaScript teamInfo object
        */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Cinzel', serif;           /* CUSTOMIZE: Change main font */
            background: #1a1a1a;                    /* CUSTOMIZE: Base background color */
            color: #d4af37;                         /* CUSTOMIZE: Default text color */
            min-height: 100vh;
            display: flex;
            background-image: 
                radial-gradient(ellipse at top, #2a2a2a, transparent),
                radial-gradient(ellipse at bottom, #1a0f0a, transparent);
            overflow-x: hidden;
            position: relative;
            font-size: 12px;
        }

        /* ======================
           ‚ú® SPECIAL EFFECTS & ANIMATIONS
           ====================== 
           
           PURPOSE: Creates the medieval atmosphere with candlelight and particles
           CUSTOMIZE: Adjust animation speeds, particle counts, flicker intensity
           
           Components:
           - Candlelight overlay (::before pseudo-element)
           - Floating particles (.particle class)
           - Corner ornaments (decorative SVG elements)
        */
        
        /* Candlelight flickering effect - creates warm atmospheric lighting */
        body::before { 
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 50%, rgba(255, 147, 41, 0.15) 0%, transparent 50%),
                        radial-gradient(circle at 70% 30%, rgba(255, 183, 77, 0.1) 0%, transparent 40%),
                        radial-gradient(circle at 50% 80%, rgba(255, 140, 0, 0.12) 0%, transparent 45%);
            pointer-events: none;
            mix-blend-mode: overlay;
            animation: flicker 4s ease-in-out infinite;    /* CUSTOMIZE: Change flicker speed */
            z-index: 1;            
        }
        
        /* CUSTOMIZE: Adjust flicker intensity and timing */
        @keyframes flicker {
            0%, 100% { opacity: 0.8; }    /* Base opacity */
            25% { opacity: 0.9; }         /* Bright moment */
            50% { opacity: 0.75; }        /* Dim moment */
            75% { opacity: 0.85; }        /* Medium bright */
        }
        
        /* Floating particles - decorative elements that float upward */
        .particle {
            position: fixed;
            pointer-events: none;
            opacity: 0;
            animation: float-up 15s linear infinite;    /* CUSTOMIZE: Change float speed */
        }
        
        @keyframes float-up {
            0% {
                opacity: 0;
                transform: translateY(100vh) scale(0);
            }
            10% {
                opacity: 0.6;                          /* CUSTOMIZE: Particle visibility */
            }
            90% {
                opacity: 0.6;
            }
            100% {
                opacity: 0;
                transform: translateY(-100vh) scale(1.5);
            }
        }
        
        /* Decorative corner ornaments - SVG-based decorative elements */
        .corner-ornament {
            position: fixed;
            width: 120px;                              /* CUSTOMIZE: Ornament size */
            height: 120px;
            opacity: 0.3;                              /* CUSTOMIZE: Ornament visibility */
            pointer-events: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='m10,10 Q50,20 90,10 Q80,50 90,90 Q50,80 10,90 Q20,50 10,10' fill='none' stroke='%23d4af37' stroke-width='1' opacity='0.5'/%3E%3Cpath d='m20,20 Q50,25 80,20 Q75,50 80,80 Q50,75 20,80 Q25,50 20,20' fill='none' stroke='%23d4af37' stroke-width='0.5'/%3E%3C/svg%3E");
            background-size: contain;
            z-index: 1;
        }
        
        /* CUSTOMIZE: Adjust corner ornament positions */
        .corner-top-left {
            top: 20px;
            left: 70px;
        }
        
        .corner-top-right {
            top: 20px;
            right: 70px;
            transform: scaleX(-1);
        }
        
        .corner-bottom-left {
            bottom: 20px;
            left: 70px;
            transform: scaleY(-1);
        }
        
        .corner-bottom-right {
            bottom: 20px;
            right: 70px;
            transform: scale(-1, -1);
        }

        /* ======================
           üîô NAVIGATION & BACK BUTTON
           ====================== 
           
           PURPOSE: Provides navigation controls
           CUSTOMIZE: Position, styling, hover effects
           
           Usage: Add onclick="goBack()" to any back button
        */
        
         .back-button {
            position: fixed;
            top: 20px;                                 /* CUSTOMIZE: Vertical position */
            left: 20px;                                /* CUSTOMIZE: Horizontal position */
            background: rgba(212, 175, 55, 0.2);      /* CUSTOMIZE: Background color */
            border: 2px solid #8b6914;                /* CUSTOMIZE: Border color */
            color: #f4e4bc;                            /* CUSTOMIZE: Text color */
            padding: 12px 24px;                       /* CUSTOMIZE: Button size */
            font-family: 'Cinzel', serif;             /* CUSTOMIZE: Font */
            font-size: 16px;                          /* CUSTOMIZE: Font size */
            font-weight: 600;
                 text-decoration: none;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 5px;
            z-index: 100;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
/* .back-button::before {
            content: '‚Üê';                          
        CUSTOMIZE: Back arrow icon            
        font-size: 20px;
        } */
        
        .back-button:hover {
            background: rgba(212, 175, 55, 0.4);      /* CUSTOMIZE: Hover background */
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
        }
        /* ======================
           üì± SIDEBAR SYSTEM
           ====================== 
           
           PURPOSE: Collapsible navigation and student management panels
           CUSTOMIZE: Widths, colors, animations, content
           
           Components:
           - Toggle buttons (left/right sides)
           - Overlay for mobile
           - Left sidebar (navigation)
           - Right sidebar (student management)
           
           JavaScript Functions:
           - toggleLeftSidebar()
           - toggleRightSidebar()
           - closeSidebars()
        */
        
        /* Sidebar toggle buttons - visible buttons to open/close sidebars */
        .sidebar-toggle {
            position: fixed;
            width: 50px;                               /* CUSTOMIZE: Button width */
            height: 120px;                             /* CUSTOMIZE: Button height */
            background: linear-gradient(180deg, #2a1810 0%, #1a0f0a 100%);
            border: 2px solid #8b6914;
            color: #d4af37;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            writing-mode: vertical-rl;                 /* Makes text vertical */
            text-orientation: mixed;
            font-family: 'Cinzel', serif;
            font-size: 16px;                          /* CUSTOMIZE: Font size */
            transition: all 0.3s ease;
            z-index: 99;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }
        
        .left-toggle {
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            border-radius: 0 10px 10px 0;
            border-left: none;
        }
        
        .right-toggle {
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            border-radius: 10px 0 0 10px;
            border-right: none;
        }
        
        .sidebar-toggle:hover {
            background: linear-gradient(180deg, #3a2418 0%, #2a1810 100%);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.5);
            width: 60px;                               /* CUSTOMIZE: Hover width expansion */
        }
        
        .sidebar-toggle:active {
            transform: translateY(-50%) scale(0.95);
        }

        /* Mobile overlay - darkens background when sidebar is open */
        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);           /* CUSTOMIZE: Overlay opacity */
            display: none;
            z-index: 98;
        }
        
        .sidebar-overlay.active {
            display: block;
        }

        /* ======================
           üìã LEFT SIDEBAR (NAVIGATION)
           ====================== 
           
           PURPOSE: Main navigation menu
           CUSTOMIZE: Width, menu items, styling
           
           Structure:
           - Header with title and close button
           - Navigation items (.nav-item)
           - Decorative background pattern
           
           To Add Menu Items:
           <a href="your-link.html" class="nav-item">Menu Item Name</a>
        */
        
        .left-sidebar {
            width: 250px;                              /* CUSTOMIZE: Sidebar width */
            background: linear-gradient(180deg, #2a1810 0%, #1a0f0a 100%);
            border-right: 2px solid #8b6914;
            box-shadow: 2px 0 10px rgba(0,0,0,0.5);
            overflow-y: auto;
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            transition: transform 0.3s ease;
            z-index: 200;
            transform: translateX(-250px);             /* Hidden by default */
        }
        
        /* Decorative background pattern for left sidebar */
        .left-sidebar::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cpath d='M50,5 L60,25 L80,25 L65,40 L70,60 L50,45 L30,60 L35,40 L20,25 L40,25 Z' fill='none' stroke='%23d4af37' stroke-width='0.5' opacity='0.1'/%3E%3C/svg%3E");
            opacity: 0.3;
            pointer-events: none;
        }
        
        .left-sidebar.expanded {
            transform: translateX(0);                  /* Visible when expanded */
        }
        
        /* Sidebar header - contains title and close button */
        .sidebar-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px;                             /* CUSTOMIZE: Header padding */
            border-bottom: 1px solid #8b6914;
            position: relative;
        }
        
        /* Animated underline effect for header */
        .sidebar-header::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 2px;
            background: linear-gradient(90deg, transparent, #d4af37, transparent);
            animation: shimmer 3s ease-in-out infinite;
        }
        
        @keyframes shimmer {
            0%, 100% { opacity: 0.5; width: 50px; }
            50% { opacity: 1; width: 100px; }
        }
        
        /* Close button styling */
        .close-btn {
            background: rgba(139, 105, 20, 0.3);
            border: 1px solid #8b6914;
            color: #d4af37;
            width: 40px;
            height: 40px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-size: 24px;
        }
        
        .close-btn:hover {
            background: rgba(212, 175, 55, 0.4);
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }
        
        .sidebar-content {
            padding: 20px;                             /* CUSTOMIZE: Content padding */
        }
        
        /* Navigation items - individual menu links */
        .nav-item {
            display: block;
            padding: 12px 15px;                        /* CUSTOMIZE: Item padding */
            margin: 8px 0;                             /* CUSTOMIZE: Item spacing */
            background: rgba(139, 105, 20, 0.2);       /* CUSTOMIZE: Item background */
            border: 1px solid #8b6914;
            border-radius: 5px;
            text-decoration: none;
            color: #d4af37;                            /* CUSTOMIZE: Text color */
            transition: all 0.3s ease;
            text-align: center;
            font-size: 14px;                           /* CUSTOMIZE: Font size */
            position: relative;
            overflow: hidden;
        }
        
        /* Decorative diamond icon that appears on hover */
        .nav-item::before {
            content: '‚óÜ';                              /* CUSTOMIZE: Icon character */
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            opacity: 0;
            transition: all 0.3s ease;
            color: #f4e4bc;
        }
        
        .nav-item:hover::before {
            opacity: 1;
        }
        
        .nav-item:hover {
            background: rgba(212, 175, 55, 0.3);       /* CUSTOMIZE: Hover background */
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
            transform: translateX(5px);                /* Slides right on hover */
        }
        
        .nav-item.active {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.4) 0%, rgba(139, 32, 32, 0.3) 100%);
            border-color: #f4e4bc;
            box-shadow: inset 0 0 10px rgba(139, 32, 32, 0.5);
        }
        
        .sidebar-title {
            font-family: 'Uncial Antiqua', cursive;    /* CUSTOMIZE: Title font */
            font-size: 20px;                          /* CUSTOMIZE: Title size */
            color: #f4e4bc;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            flex: 1;
        }

        /* ======================
           üë• RIGHT SIDEBAR (STUDENT MANAGEMENT)
           ====================== 
           
           PURPOSE: Daily student points tracking and management
           CUSTOMIZE: Width, colors, button styles
           
           Components:
           - Student dropdown selector
           - Daily student list
           - Action buttons (save, reset, export)
           
           JavaScript Integration:
           - Connects to localStorage 'conquestTeamData'
           - Manages 'dailyStudents' and 'dailyTreasury'
           - Functions: addStudentToDaily(), removeStudentFromDaily(), etc.
        */
        
        .right-sidebar {
    width: 350px;                              /* CUSTOMIZE: Sidebar width */
    background: linear-gradient(180deg, #2a1810 0%, #1a0f0a 100%);
    border-left: 2px solid #8b6914;
    box-shadow: -2px 0 10px rgba(0,0,0,0.5);
    position: fixed;
    right: 0;
    top: 0;
    height: 100vh;
    overflow-y: auto;
    transition: transform 0.3s ease;
    z-index: 100;
    transform: translateX(350px);              /* Hidden by default */
}

.right-sidebar.expanded {
    transform: translateX(0);                  /* Visible when expanded */
}

.points-title {
    font-family: 'Cinzel', serif;             /* CUSTOMIZE: Title font */
    font-size: 24px;                          /* CUSTOMIZE: Title size */
    text-align: center;
    margin-bottom: 20px;
    color: #f4e4bc;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
    border-bottom: 1px solid #8b6914;
    padding-bottom: 15px;
}

/* Section subtitles for better organization */
.section-subtitle {
    font-family: 'Uncial Antiqua', cursive;
    font-size: 16px;
    color: #d4af37;
    text-align: center;
    margin-bottom: 15px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
    position: relative;
    padding: 0 20px;
}

/* Decorative elements for section titles */
.section-subtitle::before,
.section-subtitle::after {
    content: "‚óÜ";
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    font-size: 12px;
    color: #8b6914;
}

.section-subtitle::before {
    left: 0;
}

.section-subtitle::after {
    right: 0;
}

/* Decorative divider between sections */
.divider-ornament {
    width: 100%;
    height: 30px;
    margin: 20px 0;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 30'%3E%3Cpath d='M0,15 Q50,5 100,15 T200,15' fill='none' stroke='%23d4af37' stroke-width='1' opacity='0.3'/%3E%3Ccircle cx='100' cy='15' r='3' fill='%23d4af37' opacity='0.5'/%3E%3Ccircle cx='80' cy='15' r='2' fill='%23d4af37' opacity='0.3'/%3E%3Ccircle cx='120' cy='15' r='2' fill='%23d4af37' opacity='0.3'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: center;
    background-size: contain;
    opacity: 0.5;
}

/* Class Selection Section */
.add-class-section {
    background: rgba(139, 105, 20, 0.2);       /* CUSTOMIZE: Section background */
    border: 1px solid #8b6914;
    border-radius: 5px;
    padding: 20px;                             /* CUSTOMIZE: Section padding */
    margin-bottom: 0;
}

/* Class dropdown selector */
.class-select {
    width: 100%;
    padding: 15px;                             /* CUSTOMIZE: Dropdown padding */
    background: rgba(139, 105, 20, 0.3);       /* CUSTOMIZE: Dropdown background */
    border: 2px solid #8b6914;
    color: #f4e4bc;
    font-family: 'Cinzel', serif;
    font-size: 16px;                           /* CUSTOMIZE: Font size */
    border-radius: 5px;
    margin-bottom: 15px;
    min-height: 50px;
    -webkit-appearance: none;
    appearance: none;
    /* Custom dropdown arrow */
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23d4af37' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 15px center;
    background-size: 20px;
    padding-right: 45px;
}

.class-select option {
    background: #2a1810;                       /* CUSTOMIZE: Option background */
    color: #f4e4bc;
    padding: 10px;
    font-size: 16px;
}

/* Student Selection Section */
.add-student-section {
    background: rgba(139, 105, 20, 0.2);       /* CUSTOMIZE: Section background */
    border: 1px solid #8b6914;
    border-radius: 5px;
    padding: 20px;                             /* CUSTOMIZE: Section padding */
    margin-bottom: 0;
}

/* Student dropdown selector */
.student-select {
    width: 100%;
    padding: 15px;                             /* CUSTOMIZE: Dropdown padding */
    background: rgba(139, 105, 20, 0.3);       /* CUSTOMIZE: Dropdown background */
    border: 2px solid #8b6914;
    color: #f4e4bc;
    font-family: 'Cinzel', serif;
    font-size: 16px;                           /* CUSTOMIZE: Font size */
    border-radius: 5px;
    margin-bottom: 15px;
    min-height: 50px;
    -webkit-appearance: none;
    appearance: none;
    /* Custom dropdown arrow */
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23d4af37' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 15px center;
    background-size: 20px;
    padding-right: 45px;
}

.student-select option {
    background: #2a1810;                       /* CUSTOMIZE: Option background */
    color: #f4e4bc;
    padding: 10px;
    font-size: 16px;
}

/* Add button (used for both class and student) */
.add-student-to-daily {
    width: 100%;
    padding: 18px;                             /* CUSTOMIZE: Button padding */
    background: linear-gradient(135deg, rgba(212, 175, 55, 0.3) 0%, rgba(139, 32, 32, 0.2) 100%);      /* CUSTOMIZE: Button background */
    border: 2px solid #d4af37;
    color: #f4e4bc;
    font-family: 'Cinzel', serif;
    font-size: 16px;                           /* CUSTOMIZE: Font size */
    font-weight: bold;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s ease;
    min-height: 55px;
}

.add-student-to-daily:hover {
    background: rgba(212, 175, 55, 0.5);       /* CUSTOMIZE: Hover background */
    box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
}

        /* ======================
           üë§ STUDENT DISPLAY SYSTEM
           ====================== 
           
           PURPOSE: Shows daily students with points and controls
           CUSTOMIZE: Layout, colors, team badge styling
           
           Structure:
           - Student info (name, team badge)
           - Points button (shows current points, adds 10 on click)
           - Remove button (removes from daily list)
           
           JavaScript Functions:
           - renderDailyStudents() - creates the student list
           - addPointsToStudent() - adds points and visual feedback
           - removeStudentFromDaily() - removes student from list
        */
        
        .student-item {
            background: rgba(139, 105, 20, 0.2);       /* CUSTOMIZE: Student item background */
            border: 1px solid #8b6914;
            border-radius: 5px;
            padding: 20px;                             /* CUSTOMIZE: Item padding */
            margin: 15px 0;                            /* CUSTOMIZE: Item spacing */
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
            min-height: 80px;                          /* CUSTOMIZE: Minimum height */
            position: relative;
        }
        
        .student-item:hover {
            background: rgba(212, 175, 55, 0.3);       /* CUSTOMIZE: Hover background */
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }
        
        .student-info {
            display: flex;
            flex-direction: column;
            gap: 4px;
            flex: 1;
        }
        
        .student-name {
            font-size: 16px;                           /* CUSTOMIZE: Name font size */
            color: #f4e4bc;
        }
        
        /* Team badges - color-coded team identification */
        .team-badge {
            font-size: 12px;                           /* CUSTOMIZE: Badge font size */
            padding: 2px 6px;                          /* CUSTOMIZE: Badge padding */
            border-radius: 7px;
            display: inline-block;
            background: rgba(0, 0, 0, 0.3);            /* CUSTOMIZE: Badge background */
            border: 1px solid;
            width: 80px;   
            /* Colors set dynamically by JavaScript based on team */
        }
        
        .coin-display {
            display: flex;
            align-items: center;
            gap: 10px;                                 /* CUSTOMIZE: Spacing between elements */
        }
        
        /* Points button - shows current points and adds more when clicked */
/*         .points-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 12px;                        / CUSTOMIZE: Button padding /
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.3) 0%, rgba(180, 140, 40, 0.4) 100%);
            border: 1px solid #d4af37;
            border-radius: 30px;                       / CUSTOMIZE: Button roundness /
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 50px;
            min-width: 70px;
            font-family: 'Cinzel', serif;
            font-size: 18px;                           / CUSTOMIZE: Font size /
            font-weight: bold;
            color: #f4e4bc;
        } */

        .points-btn {
    display: flex;
    align-items: center;
    gap: 20px;                                  /* Reduced from 10px */
    padding: 6px 10px;                         /* Reduced from 12px 12px */
    background: linear-gradient(135deg, rgba(212, 175, 55, 0.3) 0%, rgba(180, 140, 40, 0.4) 100%);
    border: 1px solid #d4af37;
    border-radius: 20px;                       /* Reduced from 30px */
    cursor: pointer;
    transition: all 0.3s ease;
    min-height: 36px;                          /* Reduced from 50px */
    min-width: 60px;                           /* Reduced from 70px */
    font-family: 'Cinzel', serif;
    font-size: 14px;                           /* Reduced from 18px */
    font-weight: bold;
    color: #f4e4bc;
}
        
        .points-btn:hover {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.5) 0%, rgba(180, 140, 40, 0.6) 100%);
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.6);
            transform: scale(1.05);                    /* Slight growth on hover */
        }
        
        .points-btn:active {
            transform: scale(0.95);                    /* Slight shrink when clicked */
        }
        
        .points-value {
            font-size: 16px;                           /* CUSTOMIZE: Points number size */
            min-width: 40px;
            text-align: center;
        }
        
        /* Coin icon - decorative gold coin */
        .coin-icon {
            width: 12px;                               /* CUSTOMIZE: Coin size */
            height: 12px;
            background: radial-gradient(circle, #ffd700, #b8860b);
            border-radius: 50%;
            display: inline-block;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
            position: relative;
        }
        
        .coin-icon::after {
            content: '‚Çπ';                              /* CUSTOMIZE: Coin symbol */
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #8b4513;
            font-weight: bold;
            font-size: 7px;
        }
        
        /* Remove student button */
        .remove-student {
            background: rgba(139, 20, 20, 0.3);        /* CUSTOMIZE: Remove button color */
            border: 2px solid #8b4514;
            color: #ff6b6b;
            width: 45px;                               /* CUSTOMIZE: Button size */
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 15px;
            transition: all 0.3s ease;
            font-size: 24px;                           /* CUSTOMIZE: X size */
            font-weight: bold;
        }
        
        .remove-student:hover {
            background: rgba(200, 50, 50, 0.4);
            box-shadow: 0 0 10px rgba(200, 50, 50, 0.5);
        }
        
        /* Action buttons container */
        .sidebar-buttons {
            display: flex;
            gap: 10px;                                 /* CUSTOMIZE: Button spacing */
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        /* General action button styling */
        .action-btn {
            width: 100%;
            padding: 15px;                             /* CUSTOMIZE: Button padding */
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.3) 0%, rgba(139, 32, 32, 0.2) 100%);
            border: 2px solid #d4af37;
            color: #f4e4bc;
            font-family: 'Cinzel', serif;
            font-size: 16px;                           /* CUSTOMIZE: Font size */
            font-weight: bold;
            border-radius: 5px;
            cursor: pointer;
           transition: all 0.3s ease;
            text-align: center;
            min-height: 55px;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
        }
        
        .action-btn:hover {
            transform: translateY(-2px);               /* Lifts on hover */
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.5);
        }
        
        /* Save button - special green styling */
        .save-btn {
             background: linear-gradient(135deg, rgba(46, 125, 50, 0.3) 0%, rgba(139, 32, 32, 0.2) 100%);
            border-color: #2e7d32;
        }
        
        .save-btn:hover {
            box-shadow: 0 6px 20px rgba(46, 125, 50, 0.5);
        }
        
        /* Empty state message */
      
        /* Daily students list container */
#dailyStudentsList {
    min-height: 200px;
    margin-bottom: 20px;
}

.empty-state {
    text-align: center;
    padding: 40px 20px;
    color: #b8860b;
    font-style: italic;
    background: rgba(139, 105, 20, 0.1);
    border-radius: 5px;
    border: 1px dashed #8b6914;
}
        /* Toast Notification */
.toast {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%) translateY(100px);
    background: linear-gradient(135deg, #d4af37 0%, #b8860b 100%);
    color: #1a0f0a;
    padding: 15px 30px;
    border-radius: 30px;
    font-weight: bold;
    box-shadow: 0 5px 20px rgba(212, 175, 55, 0.6);
    opacity: 0;
    transition: all 0.3s ease;
    z-index: 1001;
}

.toast.show {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
}
        /* ======================
           üè† MAIN CONTENT AREA
           ====================== 
           
           PURPOSE: Primary content display area
           CUSTOMIZE: Layout, spacing, title styling
           
           Structure:
           - Title and subtitle
           - Content containers (books, sections, etc.)
           - Responsive margins for sidebars
        */
        
        .main-content {
            flex: 1;
            padding: 40px 20px;                        /* CUSTOMIZE: Content padding */
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0 70px;                            /* CUSTOMIZE: Sidebar margins */
        }
        
        .library-title {
            font-family: 'Cinzel', serif;             /* CUSTOMIZE: Title font */
            font-size: 48px;                          /* CUSTOMIZE: Title size */
            text-align: center;
            margin-bottom: 20px;
            color: #f4e4bc;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.8);
            animation: glow 2s ease-in-out infinite alternate;
            position: relative;
        }
        
        /* Decorative stars around title */
        .library-title::before,
        .library-title::after {
            content: "‚ú¶";                              /* CUSTOMIZE: Star character */
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 30px;                           /* CUSTOMIZE: Star size */
            color: #d4af37;
            animation: sparkle 3s ease-in-out infinite;
        }
        
        .library-title::before {
            left: -50px;                               /* CUSTOMIZE: Left star position */
        }
        
        .library-title::after {
            right: -50px;                              /* CUSTOMIZE: Right star position */
            animation-delay: 1.5s;
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 0.3; transform: translateY(-50%) scale(0.8) rotate(0deg); }
            50% { opacity: 1; transform: translateY(-50%) scale(1.2) rotate(180deg); }
        }
        
        @keyframes glow {
            from { text-shadow: 3px 3px 6px rgba(0,0,0,0.8), 0 0 20px rgba(212, 175, 55, 0.5); }
            to { text-shadow: 3px 3px 6px rgba(0,0,0,0.8), 0 0 30px rgba(212, 175, 55, 0.8); }
        }
        
        .subtitle {
            font-size: 20px;                           /* CUSTOMIZE: Subtitle size */
            text-align: center;
            margin-bottom: 50px;
            color: #b8860b;
            position: relative;
            padding: 0 80px;
        }
        
        /* Decorative lines beside subtitle */
        .subtitle::before,
        .subtitle::after {
            content: "";
            position: absolute;
            top: 50%;
            width: 60px;                               /* CUSTOMIZE: Line length */
            height: 1px;
            background: linear-gradient(90deg, transparent, #b8860b, transparent);
        }
        
        .subtitle::before {
            left: 0;
        }
        
        .subtitle::after {
            right: 0;
        }

        /* ======================
           üìö CONTENT DISPLAY SYSTEMS
           ====================== 
           
           PURPOSE: Different ways to display content (books, cards, etc.)
           CUSTOMIZE: Grid layouts, item styling, hover effects
           
           Usage:
           Insert Content Specific Cards here with  @keyframes shimmer {
            0%, 100% { transform: translateX(-100%); }
            50% { transform: translateX(100%); }
        }
        */
            /* Books container - displays content as 3D book spines */
.books-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 30px;
    width: 100%;
    max-width: 1000px;
}

.book {
    position: relative;
    width: 200px;
    height: 280px;
    background: linear-gradient(90deg, #3a2418 0%, #2a1810 5%, #4a3428 10%, #3a2418 90%, #2a1810 100%);
    border-radius: 5px 15px 15px 5px;
    box-shadow: 
        5px 5px 15px rgba(0,0,0,0.6),
        inset -2px 0 5px rgba(0,0,0,0.3);
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    margin: 0 auto;
    overflow: hidden;
}

/* Book spine binding line */
.book::before {
    content: '';
    position: absolute;
    left: 10px;
    top: 5%;
    bottom: 5%;
    width: 3px;
    background: linear-gradient(90deg, rgba(139, 105, 20, 0.3), transparent);
}

/* Book shimmer effect */
.book::after {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg, transparent 30%, rgba(255, 215, 0, 0.1) 50%, transparent 70%);
    transform: rotate(45deg);
    transition: all 0.6s ease;
    opacity: 0;
}

.book:hover::after {
    opacity: 1;
    top: -100%;
    left: -100%;
}

.book:hover {
    transform: translateY(-10px) rotateY(-5deg);
    box-shadow: 
        10px 15px 25px rgba(0,0,0,0.8),
        inset -2px 0 5px rgba(0,0,0,0.3),
        0 0 30px rgba(212, 175, 55, 0.3);
}

.book-spine {
    writing-mode: vertical-rl;
    text-orientation: mixed;
    font-family: 'Cinzel', serif;
    font-size: 20px;
    color: #f4e4bc;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
    padding: 20px 10px;
    text-align: center;
    position: relative;
    z-index: 1;
}

/* Decorative ornaments on books */
.book-ornament {
    position: absolute;
    width: 80%;
    height: 20px;
    left: 10%;
    opacity: 0.3;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 20'%3E%3Cpath d='m10,10 Q25,5 40,10 T70,10 T100,10' fill='none' stroke='%23d4af37' stroke-width='1'/%3E%3Ccircle cx='50' cy='10' r='3' fill='%23d4af37'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: center;
    background-size: contain;
}

.book-ornament-top {
    top: 20px;
}

.book-ornament-bottom {
    bottom: 20px;
}

/* Coming soon book styling */
.coming-soon {
    opacity: 0.5;
    cursor: not-allowed;
}

.coming-soon:hover {
    transform: none;
    box-shadow: 5px 5px 15px rgba(0,0,0,0.6);
}

.coming-soon::after {
    content: 'Coming Soon';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(90deg);
    background: rgba(0,0,0,0.8);
    padding: 5px 10px;
    border-radius: 5px;
    font-size: 12px;
    white-space: nowrap;
}
        /* ======================
           üì± RESPONSIVE DESIGN
           ====================== 
           
           PURPOSE: Adapt layout for different screen sizes
           CUSTOMIZE: Breakpoints, mobile-specific styling
           
           Breakpoints:
           - 1024px: Tablet landscape
           - 768px: Tablet portrait and mobile
        */
        
        /* Tablet styles */
        @media (max-width: 1024px) {
            .books-container {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 20px;
            }
            
            .book {
                width: 150px;
                height: 220px;
            }
            
            .book-spine {
                font-size: 16px;
            }
            
            .library-title {
                font-size: 36px;
            }
            
            .subtitle {
                font-size: 18px;
            }
            
            .right-sidebar {
                width: 100%;
                max-width: 500px;
            }
            
            .right-sidebar.expanded {
                transform: translateX(0);
                right: 0;
                left: auto;
            }
            
            .sidebar-toggle {
                width: 60px;
                height: 140px;
                font-size: 18px;
            }
            
            .student-item {
                margin: 20px 0;
            }
            
            .sidebar-buttons {
                gap: 15px;
            }
        }
        
        /* Mobile styles */
        @media (max-width: 768px) {
            .main-content {
                margin: 0 60px;
                padding: 20px 10px;
            }
            
            .library-title {
                font-size: 28px;
            }
            
            .books-container {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .sections-container {
                grid-template-columns: 1fr;
                gap: 25px;
            }
            
            .section-card {
                min-height: 200px;
                padding: 30px;
            }
        }

        /* ======================
           üé¨ UTILITY ANIMATIONS
           ====================== 
           
           PURPOSE: Reusable animation effects
           CUSTOMIZE: Timing, intensity, easing
           
           Available Animations:
           - pulse: Gentle scaling effect
           - goldenGlow: Golden lighting effect
        */
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }              /* CUSTOMIZE: Pulse intensity */
            100% { transform: scale(1); }
        }
        
        @keyframes goldenGlow {
            0% { box-shadow: 0 0 15px rgba(212, 175, 55, 0.6); }
            50% { box-shadow: 0 0 30px rgba(255, 215, 0, 0.8); }    /* CUSTOMIZE: Glow intensity */
            100% { box-shadow: 0 0 15px rgba(212, 175, 55, 0.6); }
        }
        
         @keyframes shimmer {
            0%, 100% { transform: translateX(-100%); }
            50% { transform: translateX(100%); }
        }
        /* TOEFL Speaking Activity Styles */
    .toefl-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
    }

    .activity-header {
        background: rgba(139, 105, 20, 0.3);
        border: 2px solid #8b6914;
        border-radius: 10px;
        padding: 30px;
        margin-bottom: 30px;
        text-align: center;
        position: relative;
        overflow: hidden;
    }

    .activity-header::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(212, 175, 55, 0.1) 0%, transparent 70%);
        animation: rotate 20s linear infinite;
    }

    @keyframes rotate {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    .activity-title {
        font-family: 'Uncial Antiqua', cursive;
        font-size: 36px;
        color: #f4e4bc;
        text-shadow: 3px 3px 6px rgba(0,0,0,0.8);
        margin-bottom: 10px;
        position: relative;
        z-index: 1;
    }

    .activity-subtitle {
        font-size: 18px;
        color: #d4af37;
        position: relative;
        z-index: 1;
    }

    /* Progress Tracker */
    .progress-tracker {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 20px;
        margin-bottom: 40px;
        flex-wrap: wrap;
    }

    .progress-step {
        background: rgba(139, 105, 20, 0.2);
        border: 2px solid #8b6914;
        border-radius: 50%;
        width: 60px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        color: #b8860b;
        position: relative;
        transition: all 0.3s ease;
    }

    .progress-step.active {
        background: rgba(212, 175, 55, 0.4);
        border-color: #d4af37;
        color: #f4e4bc;
        box-shadow: 0 0 20px rgba(212, 175, 55, 0.6);
        transform: scale(1.1);
    }

    .progress-step.completed {
        background: rgba(46, 125, 50, 0.3);
        border-color: #2e7d32;
        color: #81c784;
    }

    .progress-step::after {
        content: '';
        position: absolute;
        right: -20px;
        top: 50%;
        transform: translateY(-50%);
        width: 20px;
        height: 2px;
        background: #8b6914;
    }

    .progress-step:last-child::after {
        display: none;
    }

    /* Main Activity Area */
    .activity-area {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin-bottom: 30px;
    }

    /* Reading Section */
    .reading-section {
        background: rgba(139, 105, 20, 0.2);
        border: 2px solid #8b6914;
        border-radius: 10px;
        padding: 30px;
        position: relative;
    }

    .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 1px solid #8b6914;
    }

    .section-title {
        font-family: 'Cinzel', serif;
        font-size: 24px;
        color: #f4e4bc;
    }

    .timer-display {
        background: rgba(212, 175, 55, 0.3);
        border: 1px solid #d4af37;
        border-radius: 20px;
        padding: 8px 20px;
        font-size: 18px;
        color: #f4e4bc;
        font-weight: bold;
        min-width: 100px;
        text-align: center;
    }

    .timer-display.warning {
        background: rgba(255, 152, 0, 0.4);
        border-color: #ff9800;
        animation: pulse 1s ease-in-out infinite;
    }

    .timer-display.danger {
        background: rgba(244, 67, 54, 0.4);
        border-color: #f44336;
        animation: pulse 0.5s ease-in-out infinite;
    }

    .reading-content {
        background: rgba(26, 15, 10, 0.5);
        border: 1px solid #8b6914;
        border-radius: 5px;
        padding: 25px;
        min-height: 300px;
        color: #f4e4bc;
        line-height: 1.8;
        font-size: 16px;
    }

    .reading-title {
        font-family: 'Cinzel', serif;
        font-size: 20px;
        color: #d4af37;
        margin-bottom: 15px;
        text-align: center;
    }

    .reading-text {
        text-align: justify;
    }

    /* Audio Section */
    .audio-section {
        background: rgba(139, 105, 20, 0.2);
        border: 2px solid #8b6914;
        border-radius: 10px;
        padding: 30px;
    }

    .audio-controls {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 20px;
        margin-top: 20px;
    }

    .audio-player {
        width: 100%;
        max-width: 400px;
    }

    .play-button {
        background: linear-gradient(135deg, rgba(212, 175, 55, 0.4) 0%, rgba(180, 140, 40, 0.5) 100%);
        border: 2px solid #d4af37;
        border-radius: 50%;
        width: 80px;
        height: 80px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 40px;
        color: #f4e4bc;
    }

    .play-button:hover {
        transform: scale(1.1);
        box-shadow: 0 0 30px rgba(212, 175, 55, 0.6);
    }

    .play-button:active {
        transform: scale(0.95);
    }

    /* Note Taking Area */
    .notes-section {
        grid-column: 1 / -1;
        background: rgba(139, 105, 20, 0.2);
        border: 2px solid #8b6914;
        border-radius: 10px;
        padding: 30px;
    }

    .notes-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin-top: 20px;
    }

    .note-area {
        background: rgba(26, 15, 10, 0.5);
        border: 1px solid #8b6914;
        border-radius: 5px;
        padding: 20px;
    }

    .note-label {
        font-family: 'Cinzel', serif;
        font-size: 18px;
        color: #d4af37;
        margin-bottom: 10px;
        display: block;
    }

    .note-input {
        width: 100%;
        background: rgba(139, 105, 20, 0.2);
        border: 1px solid #8b6914;
        color: #f4e4bc;
        padding: 10px;
        border-radius: 5px;
        font-family: 'Cinzel', serif;
        font-size: 14px;
        resize: vertical;
        min-height: 80px;
    }

    .note-input:focus {
        outline: none;
        border-color: #d4af37;
        box-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
    }

    /* Response Section */
    .response-section {
        grid-column: 1 / -1;
        background: rgba(139, 105, 20, 0.2);
        border: 2px solid #8b6914;
        border-radius: 10px;
        padding: 30px;
        display: none;
    }

    .response-section.active {
        display: block;
    }

    .response-structure {
        background: rgba(26, 15, 10, 0.5);
        border: 1px solid #8b6914;
        border-radius: 5px;
        padding: 20px;
        margin-bottom: 20px;
    }

    .structure-item {
        margin: 15px 0;
        padding-left: 20px;
        position: relative;
    }

    .structure-item::before {
        content: '‚óÜ';
        position: absolute;
        left: 0;
        color: #d4af37;
    }

    .recording-controls {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 20px;
        margin-top: 30px;
    }

    .record-button {
        background: linear-gradient(135deg, rgba(244, 67, 54, 0.4) 0%, rgba(183, 28, 28, 0.5) 100%);
        border: 2px solid #f44336;
        border-radius: 50%;
        width: 100px;
        height: 100px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
        color: #ffcdd2;
        font-size: 20px;
        font-weight: bold;
    }

    .record-button.recording {
        animation: recordPulse 1s ease-in-out infinite;
        background: linear-gradient(135deg, rgba(244, 67, 54, 0.6) 0%, rgba(183, 28, 28, 0.7) 100%);
    }

    @keyframes recordPulse {
        0% { box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.7); }
        70% { box-shadow: 0 0 0 20px rgba(244, 67, 54, 0); }
        100% { box-shadow: 0 0 0 0 rgba(244, 67, 54, 0); }
    }

    /* Control Buttons */
    .control-buttons {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 30px;
        flex-wrap: wrap;
    }

    .control-button {
        background: linear-gradient(135deg, rgba(212, 175, 55, 0.3) 0%, rgba(139, 32, 32, 0.2) 100%);
        border: 2px solid #d4af37;
        color: #f4e4bc;
        padding: 15px 30px;
        border-radius: 30px;
        font-family: 'Cinzel', serif;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        min-width: 150px;
    }

    .control-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 20px rgba(212, 175, 55, 0.5);
    }

    .control-button:active {
        transform: translateY(0);
    }

    .control-button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .start-button {
        background: linear-gradient(135deg, rgba(46, 125, 50, 0.3) 0%, rgba(27, 94, 32, 0.2) 100%);
        border-color: #2e7d32;
    }

    /* Instructions Overlay */
    .instructions-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.9);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        padding: 20px;
    }

    .instructions-content {
        background: linear-gradient(180deg, #2a1810 0%, #1a0f0a 100%);
        border: 3px solid #d4af37;
        border-radius: 15px;
        padding: 40px;
        max-width: 800px;
        max-height: 90vh;
        overflow-y: auto;
        position: relative;
    }

    .instructions-content h2 {
        font-family: 'Uncial Antiqua', cursive;
        font-size: 32px;
        color: #f4e4bc;
        text-align: center;
        margin-bottom: 30px;
        text-shadow: 3px 3px 6px rgba(0,0,0,0.8);
    }

    .instructions-list {
        list-style: none;
        padding: 0;
    }

    .instructions-list li {
        margin: 20px 0;
        padding-left: 30px;
        position: relative;
        color: #d4af37;
        font-size: 16px;
        line-height: 1.6;
    }

    .instructions-list li::before {
        content: '‚ú¶';
        position: absolute;
        left: 0;
        color: #f4e4bc;
        font-size: 20px;
    }

    .close-instructions {
        position: absolute;
        top: 20px;
        right: 20px;
        background: rgba(139, 105, 20, 0.3);
        border: 2px solid #8b6914;
        color: #d4af37;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        transition: all 0.3s ease;
    }

    .close-instructions:hover {
        background: rgba(212, 175, 55, 0.4);
        box-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
    }

    /* Presentation Mode Styles */
    .presentation-toggle {
        position: fixed;
        bottom: 30px;
        right: 30px;
        background: linear-gradient(135deg, rgba(156, 39, 176, 0.3) 0%, rgba(74, 20, 140, 0.2) 100%);
        border: 2px solid #9c27b0;
        color: #f4e4bc;
        padding: 15px 30px;
        border-radius: 30px;
        font-family: 'Cinzel', serif;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        z-index: 100;
        box-shadow: 0 5px 20px rgba(156, 39, 176, 0.4);
    }

    .presentation-toggle:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(156, 39, 176, 0.6);
    }

    /* Presentation Mode Container */
    .presentation-mode {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(180deg, #1a0f0a 0%, #2a1810 100%);
        z-index: 999;
        overflow-y: auto;
        padding: 20px;
    }

    .presentation-mode.active {
        display: block;
    }

    .presentation-header {
        background: rgba(139, 105, 20, 0.3);
        border: 2px solid #8b6914;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 30px;
        text-align: center;
        position: relative;
    }

    .presentation-title {
        font-family: 'Uncial Antiqua', cursive;
        font-size: 36px;
        color: #f4e4bc;
        text-shadow: 3px 3px 6px rgba(0,0,0,0.8);
        margin-bottom: 10px;
    }

    .close-presentation {
        position: absolute;
        top: 20px;
        right: 20px;
        background: rgba(139, 105, 20, 0.3);
        border: 2px solid #8b6914;
        color: #d4af37;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        transition: all 0.3s ease;
    }

    .close-presentation:hover {
        background: rgba(212, 175, 55, 0.4);
        box-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
    }

    .presentation-grid {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 30px;
        max-width: 1400px;
        margin: 0 auto;
    }

    /* Timer Section */
    .speaker-timer-section {
        background: rgba(139, 105, 20, 0.2);
        border: 2px solid #8b6914;
        border-radius: 10px;
        padding: 30px;
        text-align: center;
        position: relative;
        overflow: hidden;
    }

    .speaker-timer-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(circle at center, rgba(212, 175, 55, 0.1) 0%, transparent 70%);
        animation: pulse 3s ease-in-out infinite;
    }

    .timer-display-large {
        font-family: 'Cinzel', serif;
        font-size: 72px;
        color: #d4af37;
        text-shadow: 0 0 20px rgba(212, 175, 55, 0.5);
        margin: 20px 0;
        position: relative;
        z-index: 1;
        font-weight: bold;
        letter-spacing: 5px;
    }

    .timer-display-large.warning {
        color: #ff9800;
        animation: timerPulse 1s ease-in-out infinite;
    }

    .timer-display-large.danger {
        color: #f44336;
        animation: timerPulse 0.5s ease-in-out infinite;
    }

    @keyframes timerPulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
    }

    .timer-controls {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 20px;
        position: relative;
        z-index: 1;
    }

    .timer-btn {
        background: linear-gradient(135deg, rgba(212, 175, 55, 0.3) 0%, rgba(139, 32, 32, 0.2) 100%);
        border: 2px solid #d4af37;
        color: #f4e4bc;
        padding: 12px 24px;
        border-radius: 25px;
        font-family: 'Cinzel', serif;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        min-width: 100px;
    }

    .timer-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 20px rgba(212, 175, 55, 0.5);
    }

    .timer-btn.start {
        background: linear-gradient(135deg, rgba(46, 125, 50, 0.3) 0%, rgba(27, 94, 32, 0.2) 100%);
        border-color: #2e7d32;
    }

    .timer-btn.stop {
        background: linear-gradient(135deg, rgba(244, 67, 54, 0.3) 0%, rgba(183, 28, 28, 0.2) 100%);
        border-color: #f44336;
    }

    /* Speaking Outline Section */
    .outline-section {
        background: rgba(139, 105, 20, 0.2);
        border: 2px solid #8b6914;
        border-radius: 10px;
        padding: 30px;
    }

    .outline-content {
        background: rgba(26, 15, 10, 0.5);
        border: 1px solid #8b6914;
        border-radius: 5px;
        padding: 25px;
        margin-top: 20px;
    }

    .outline-step {
        margin: 15px 0;
        padding-left: 30px;
        position: relative;
        color: #d4af37;
        font-size: 16px;
        line-height: 1.8;
    }

    .outline-step::before {
        content: attr(data-number);
        position: absolute;
        left: 0;
        top: 2px;
        width: 22px;
        height: 22px;
        background: radial-gradient(circle, #d4af37, #b8860b);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        color: #1a0f0a;
        font-weight: bold;
    }

    .outline-time {
        font-size: 14px;
        color: #b8860b;
        font-style: italic;
        display: block;
        margin-left: 30px;
        margin-top: 5px;
    }

    /* Random Order Section */
    .order-section {
        background: rgba(139, 105, 20, 0.2);
        border: 2px solid #8b6914;
        border-radius: 10px;
        padding: 30px;
    }

    .generate-btn {
        width: 100%;
        padding: 18px 45px;
        background: linear-gradient(135deg, rgba(156, 39, 176, 0.3) 0%, rgba(74, 20, 140, 0.2) 100%);
        border: 2px solid #9c27b0;
        color: #f4e4bc;
        font-family: 'Cinzel', serif;
        font-size: 18px;
        font-weight: bold;
        border-radius: 30px;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-bottom: 20px;
        position: relative;
        overflow: hidden;
    }

    .generate-btn::before {
        content: 'üé≤';
        position: absolute;
        left: 20px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 24px;
        animation: diceRoll 2s ease-in-out infinite;
    }

    @keyframes diceRoll {
        0%, 100% { transform: translateY(-50%) rotate(0deg); }
        50% { transform: translateY(-50%) rotate(360deg); }
    }

    .generate-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 20px rgba(156, 39, 176, 0.5);
    }

    .order-list {
        background: rgba(26, 15, 10, 0.5);
        border: 1px solid #8b6914;
        border-radius: 5px;
        padding: 20px;
        margin-top: 20px;
        max-height: 350px;
        overflow-y: auto;
    }

    .order-item {
        display: flex;
        align-items: center;
        padding: 12px 15px;
        margin: 8px 0;
        background: rgba(139, 105, 20, 0.2);
        border: 1px solid #8b6914;
        border-radius: 5px;
        transition: all 0.3s ease;
    }

    .order-item:hover {
        background: rgba(212, 175, 55, 0.3);
        transform: translateX(5px);
    }

    .order-number {
        width: 30px;
        height: 30px;
        background: radial-gradient(circle, #d4af37, #b8860b);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        color: #1a0f0a;
        margin-right: 15px;
        flex-shrink: 0;
    }

    .order-name {
        flex: 1;
        color: #f4e4bc;
        font-size: 16px;
    }

    .current-speaker {
        background: rgba(46, 125, 50, 0.3);
        border-color: #2e7d32;
        box-shadow: 0 0 15px rgba(46, 125, 50, 0.5);
        animation: currentPulse 2s ease-in-out infinite;
    }

    @keyframes currentPulse {
        0%, 100% { transform: translateX(5px) scale(1); }
        50% { transform: translateX(5px) scale(1.02); }
    }

    .empty-order {
        text-align: center;
        color: #b8860b;
        font-style: italic;
        padding: 40px;
    }

    /* Responsive Design */
    @media (max-width: 1200px) {
        .presentation-grid {
            grid-template-columns: 1fr;
            gap: 20px;
        }
        
        .timer-display-large {
            font-size: 56px;
        }
    }

    @media (max-width: 1024px) {
        .activity-area {
            grid-template-columns: 1fr;
        }

        .notes-grid {
            grid-template-columns: 1fr;
        }
    }

    @media (max-width: 768px) {
        .activity-title {
            font-size: 28px;
        }

        .progress-tracker {
            gap: 10px;
        }

        .progress-step {
            width: 50px;
            height: 50px;
            font-size: 12px;
        }

        .control-buttons {
            flex-direction: column;
            align-items: center;
        }

        .control-button {
            width: 100%;
            max-width: 250px;
        }
    }

    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
    }

    @keyframes goldenGlow {
        0% { box-shadow: 0 0 15px rgba(212, 175, 55, 0.6); }
        50% { box-shadow: 0 0 30px rgba(255, 215, 0, 0.8); }
        100% { box-shadow: 0 0 15px rgba(212, 175, 55, 0.6); }
    }

    @keyframes shimmer {
        0%, 100% { transform: translateX(-100%); }
        50% { transform: translateX(100%); }
    }
    </style>
</head>
<body>
    <!-- üé® DECORATIVE ELEMENTS -->
    <div class="corner-ornament corner-top-left"></div>
    <div class="corner-ornament corner-top-right"></div>
    <div class="corner-ornament corner-bottom-left"></div>
    <div class="corner-ornament corner-bottom-right"></div>
    
    <!-- back button NAVIGATION -->
  <button class="back-button" onclick="goBack()">Back to Library</button> 
    
    <!-- üì± SIDEBAR SYSTEM -->
    <div class="sidebar-toggle left-toggle" onclick="toggleLeftSidebar()">MENU</div>
    <div class="sidebar-toggle right-toggle" onclick="toggleRightSidebar()">POINTS</div>
    
    <!-- Mobile overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="closeSidebars()"></div>
    
    <!-- üìã LEFT SIDEBAR (NAVIGATION) -->
    <div class="left-sidebar" id="leftSidebar">
        <div class="sidebar-header">
            <h2 class="sidebar-title">Navigation</h2>
            <button class="close-btn" onclick="toggleLeftSidebar()">√ó</button>
        </div>
        <div class="sidebar-content">
            <!-- üîß CUSTOMIZE: Add your navigation links here -->
             <a href="/index.html" class="nav-item">Library</a>
            <a href="/vocab/vocab.html" class="nav-item">Vocab</a>
            <a href="/grammar/grammar.html" class="nav-item">Grammar</a>
              <a href="/novel/novel.html" class="nav-item">Novel</a>
            <a href="/listening/listening.html" class="nav-item">Listening</a>
            <a href="/debate/debate.html" class="nav-item active">Speaking</a>
            <a href="/reading/reading.html" class="nav-item">Reading</a>
            <a href="/essay/essay.html" class="nav-item">Essay</a>
            <a href="/ted/ted-hub.html" class="nav-item">TED</a>
            <a href="/science/science.html" class="nav-item">Science</a>
            <a href="/review/review.html" class="nav-item">Review</a>
            <a href="/timer/timer.html" class="nav-item">Timer</a>
            <a href="/conquest/conquest-of-rayhaven.html" class="nav-item">Conquest</a>
        </div>
    </div>
    
    <!-- üë• RIGHT SIDEBAR (STUDENT MANAGEMENT) -->
    <div class="right-sidebar" id="rightSidebar">
        <div class="sidebar-header">
            <h2 class="points-title">Daily Points</h2>
            <button class="close-btn" onclick="toggleRightSidebar()">√ó</button>
        </div>
        <div class="sidebar-content">
    <!-- Section Title for Class Selection -->
    <h3 class="section-subtitle">Quick Add by Class</h3>
    
    <!-- Class Selection Section -->
    <div class="add-class-section">
        <select class="class-select" id="classSelect">
            <option value="">Select a class...</option>
            <option value="m1">Monday 1 (m1)</option>
            <option value="m2">Monday 2 (m2)</option>
            <option value="tu1">Tuesday 1 (tu1)</option>
            <option value="tu2">Tuesday 2 (tu2)</option>
            <option value="w1">Wednesday 1 (w1)</option>
            <option value="w2">Wednesday 2 (w2)</option>
            <option value="th1">Thursday 1 (th1)</option>
            <option value="th2">Thursday 2 (th2)</option>
            <option value="s1">Saturday 1 (s1)</option>
            <option value="s2">Saturday 2 (s2)</option>
        </select>
        <button class="add-student-to-daily" onclick="addClassToDaily()">Add Entire Class</button>
    </div>
    
    <div class="divider-ornament"></div>
    
    <!-- Section Title for Individual Students -->
    <h3 class="section-subtitle">Add Individual Student</h3>
    
    <!-- Individual Student Selection -->
    <div class="add-student-section">
        <select class="student-select" id="studentSelect">
            <option value="">Select a scholar...</option>
        </select>
        <button class="add-student-to-daily" onclick="addStudentToDaily()">Add to Daily Points</button>
    </div>
    
    <div class="divider-ornament"></div>
    
    <!-- Section Title for Active Students -->
    <h3 class="section-subtitle">Today's Scholars</h3>
    
    <!-- Daily Students List -->
    <div id="dailyStudentsList">
        <div class="empty-state">No scholars in today's class yet.<br>Add students from the options above.</div>
    </div>
    
    <!-- Action Buttons -->
    <div class="sidebar-buttons">
        <button class="action-btn" onclick="resetDailyTreasury()">Reset All Points</button>
        <button class="action-btn save-btn" onclick="saveToConquest()">Save to Conquest</button>
        <button class="action-btn">Export Data</button>
    </div>
</div>
 </div>       
    
    <!-- üè† MAIN CONTENT -->
<div class="main-content">
    
    <div class="toefl-container">
    <!-- Activity Header -->
    <div class="activity-header">
        <h1 class="activity-title">TOEFL Speaking Type 3</h1>
        <p class="activity-subtitle">Master the Art of Academic Response</p>
    </div>

    <!-- Progress Tracker -->
    <div class="progress-tracker">
        <div class="progress-step active" id="step1">Read</div>
        <div class="progress-step" id="step2">Listen</div>
        <div class="progress-step" id="step3">Prepare</div>
        <div class="progress-step" id="step4">Speak</div>
    </div>

    <!-- Main Activity Area -->
    <div class="activity-area">
        <!-- Reading Section -->
        <div class="reading-section" id="readingSection">
            <div class="section-header">
                <h2 class="section-title">Reading Passage</h2>
                <div class="timer-display" id="readingTimer">0:45</div>
            </div>
            <div class="reading-content" id="readingContent" style="display: none;">
                <h3 class="reading-title">Library's Extended Hours</h3>
                <p class="reading-text">
                    To all students, please note that the hours of the campus's main library will be extended during finals week. Closing time during the week will be changed from 10 P.M. to 1 A.M. On weekends, the time will be extended from 8 P.M. to 1 A.M. as well. The decision to extend library hours is based upon the needs of students who require the facility and its resources to help them prepare for exams late into the night. At the conclusion of finals week, the library will return to its standard operating hours. The university hopes that the extended hours will give students ample opportunities to prepare for exams.
                </p>
            </div>
        </div>

        <!-- Audio Section -->
        <div class="audio-section" id="audioSection">
            <div class="section-header">
                <h2 class="section-title">Conversation</h2>
                <div class="timer-display" id="listeningTimer" style="display: none;">Playing...</div>
            </div>
            <div class="audio-controls">
                <audio id="audioPlayer" preload="auto">
                    <source src="13_Library's Extended Hours.mp3" type="audio/mpeg">
                    Your browser does not support the audio element.
                </audio>
                <button class="play-button" id="playButton" style="display: none;">
                    ‚ñ∂
                </button>
                <p style="color: #d4af37; text-align: center; margin-top: 20px;">
                    Listen carefully and take notes on the student's opinion and reasons.
                </p>
            </div>
        </div>
    </div>

    <!-- Note Taking Section -->
    <div class="notes-section" id="notesSection">
        <div class="section-header">
            <h2 class="section-title">Note Taking</h2>
        </div>
        <div class="notes-grid">
            <div class="note-area">
                <label class="note-label">Reading Notes</label>
                <textarea class="note-input" id="readingNotes" placeholder="Main idea and key details from the reading..."></textarea>
            </div>
            <div class="note-area">
                <label class="note-label">Conversation Notes</label>
                <textarea class="note-input" id="conversationNotes" placeholder="Student's opinion, reasons, and details..."></textarea>
            </div>
        </div>
    </div>

    <!-- Response Section -->
    <div class="response-section" id="responseSection">
        <div class="section-header">
            <h2 class="section-title">Prepare Your Response</h2>
            <div class="timer-display" id="prepTimer" style="display: none;">0:30</div>
        </div>
        <div class="response-structure">
            <h3 style="color: #d4af37; margin-bottom: 15px;">Response Structure:</h3>
            <div class="structure-item">State the student's opinion clearly</div>
            <div class="structure-item">Explain Reason 1 with supporting details</div>
            <div class="structure-item">Explain Reason 2 with supporting details</div>
            <div class="structure-item">Brief conclusion (if time permits)</div>
        </div>
        <div class="recording-controls">
            <button class="record-button" id="recordButton" style="display: none;">
                <span id="recordText">REC</span>
            </button>
            <div class="timer-display" id="speakTimer" style="display: none;">1:00</div>
        </div>
    </div>

    <!-- Control Buttons -->
    <div class="control-buttons">
        <button class="control-button start-button" id="startButton">Start Activity</button>
        <button class="control-button" id="resetButton" style="display: none;">Reset Activity</button>
        <button class="control-button" id="viewAnswerButton" style="display: none;">View Sample Answer</button>
    </div>
</div>

<!-- Presentation Mode Toggle Button -->
<button class="presentation-toggle" id="presentationToggle">
    Presentation Mode
</button>

<!-- Presentation Mode Container -->
<div class="presentation-mode" id="presentationMode">
    <div class="presentation-header">
        <button class="close-presentation" id="closePresentation">√ó</button>
        <h2 class="presentation-title">Speaking Presentation Dashboard</h2>
    </div>
    
    <div class="presentation-grid">
        <!-- Speaker Timer Section -->
        <div class="speaker-timer-section">
            <h3 class="section-title">Speaker Timer</h3>
            <div class="timer-display-large" id="speakerTimer">1:00</div>
            <div class="timer-controls">
                <button class="timer-btn start" id="startSpeakerTimer">Start</button>
                <button class="timer-btn stop" id="stopSpeakerTimer">Stop</button>
                <button class="timer-btn" id="resetSpeakerTimer">Reset</button>
            </div>
        </div>
        
        <!-- Speaking Outline Section -->
        <div class="outline-section">
            <h3 class="section-title">Speaking Outline</h3>
            <div class="outline-content">
                <div class="outline-step" data-number="1">
                    <strong>State the announcement</strong>
                    <span class="outline-time">~10 seconds</span>
                </div>
                <div class="outline-step" data-number="2">
                    <strong>State student's opinion</strong>
                    <span class="outline-time">~10 seconds</span>
                </div>
                <div class="outline-step" data-number="3">
                    <strong>First reason + details</strong>
                    <span class="outline-time">~15-20 seconds</span>
                </div>
                <div class="outline-step" data-number="4">
                    <strong>Second reason + details</strong>
                    <span class="outline-time">~15-20 seconds</span>
                </div>
                <div class="outline-step" data-number="5">
                    <strong>Brief conclusion (if time)</strong>
                    <span class="outline-time">~5 seconds</span>
                </div>
            </div>
        </div>
        
        <!-- Random Order Section -->
        <div class="order-section">
            <h3 class="section-title">Speaking Order</h3>
            <button class="generate-btn" id="generateOrder">Generate Random Order</button>
            <div class="order-list" id="speakingOrderList">
                <div class="empty-order">No students in today's class yet.<br>Add students from the sidebar first.</div>
            </div>
        </div>
    </div>
</div>

<!-- Instructions Overlay -->
<div class="instructions-overlay" id="instructionsOverlay">
    <div class="instructions-content">
        <button class="close-instructions" onclick="closeInstructions()">√ó</button>
        <h2>TOEFL Speaking Type 3 Instructions</h2>
        <ul class="instructions-list">
            <li>You will have 45 seconds to read a short passage about a campus announcement or policy</li>
            <li>After reading, you will listen to a conversation between two students discussing the announcement</li>
            <li>Take notes while reading and listening - you'll need to identify the speaking student's opinion and reasons</li>
            <li>You will have 30 seconds to prepare your response after the conversation ends</li>
            <li>You must speak for 60 seconds, stating the student's opinion and explaining their reasons</li>
            <li>Remember: Do NOT give your own opinion - only report what the student in the conversation said</li>
            <li>Use the note-taking areas to organize your thoughts effectively</li>
        </ul>
        <div style="text-align: center; margin-top: 30px;">
            <button class="control-button" onclick="closeInstructions()">Begin Practice</button>
        </div>
    </div>
</div>
    <!-- üì¢ NOTIFICATION SYSTEM -->
    <div class="toast" id="toast"></div>
    
    <script>
        /* ======================
           üéØ STUDENT MANAGEMENT SYSTEM
           ====================== 
           
           PURPOSE: Manages daily student points and integrates with conquest system
           
           üîß CUSTOMIZATION GUIDE:
           
           1. TEAM SETUP:
           - Modify teamInfo object to match your team names and colors
           - Teams are automatically loaded from localStorage 'conquestTeamData'
           
           2. POINT SYSTEM:
           - Default: 10 points per click (change in addPointsToStudent function)
           - Modify point increments in addPointsToStudent()
           
           3. STORAGE:
           - Uses localStorage for persistence
           - 'conquestTeamData' = main student/team data
           - 'dailyStudents' = today's active students
           - 'dailyTreasury' = today's point tracking
           
           4. INTEGRATION:
           - Works with existing conquest system
           - saveToConquest() transfers daily points to main system
           - Automatically syncs with team data
        */
        
        // Daily treasury object to track today's students
        let dailyStudents = JSON.parse(localStorage.getItem('dailyStudents') || '[]');
        let dailyTreasury = JSON.parse(localStorage.getItem('dailyTreasury') || '{}');
        
        // Load all students from Conquest data
        function loadAllStudentsFromConquest() {
            const conquestData = localStorage.getItem('conquestTeamData');
            if (conquestData) {
                const teamData = JSON.parse(conquestData);
                const students = [];
                
                // Extract all students from teams
                Object.entries(teamData).forEach(([teamKey, team]) => {
                    team.students.forEach(student => {
                        if (student.name !== 'Donation') {
                            students.push({
                                name: student.name,
                                team: teamKey,
                                classes: student.classes || [] // Include classes data
                            });
                        }
                    });
                });
                
                // Sort alphabetically
                return students.sort((a, b) => a.name.localeCompare(b.name));
            }
            return [];
        }
        
        // üîß CUSTOMIZE: Team information for badges
        const teamInfo = {
            'jiggleBoggle': { name: 'Jiggle Boggle', color: '#81c784' },
            'pinkie': { name: 'Pinkie', color: '#f06292' },
            'handsomeJoon': { name: 'Handsome Joon', color: '#ff6b6b' },
            'bomi': { name: 'Bomi', color: '#ffd54f' },
            'geniusIrene': { name: 'Genius Irene', color: '#4fc3f7' },
            'prettyEggplant': { name: 'Pretty Eggplant', color: '#ba68c8' }
        };
        
        // Function to toggle left sidebar
        function toggleLeftSidebar() {
            const sidebar = document.getElementById('leftSidebar');
            const overlay = document.getElementById('sidebarOverlay');
            const isExpanded = sidebar.classList.contains('expanded');
            
            if (isExpanded) {
                sidebar.classList.remove('expanded');
                overlay.classList.remove('active');
            } else {
                document.getElementById('rightSidebar').classList.remove('expanded');
                sidebar.classList.add('expanded');
                overlay.classList.add('active');
            }
        }
        
        // Function to toggle right sidebar
        function toggleRightSidebar() {
            const sidebar = document.getElementById('rightSidebar');
            const overlay = document.getElementById('sidebarOverlay');
            const isExpanded = sidebar.classList.contains('expanded');
            
            if (isExpanded) {
                sidebar.classList.remove('expanded');
                overlay.classList.remove('active');
            } else {
                document.getElementById('leftSidebar').classList.remove('expanded');
                sidebar.classList.add('expanded');
                overlay.classList.add('active');
            }
        }
        
        // Function to close all sidebars
        function closeSidebars() {
            document.getElementById('leftSidebar').classList.remove('expanded');
            document.getElementById('rightSidebar').classList.remove('expanded');
            document.getElementById('sidebarOverlay').classList.remove('active');
        }
        
        // Populate student dropdown
        function populateStudentDropdown() {
            const select = document.getElementById('studentSelect');
            select.innerHTML = '<option value="">Select a scholar...</option>';
            
            const allStudents = loadAllStudentsFromConquest();
            
            allStudents.forEach(student => {
                // Only show students not already in daily list
                if (!dailyStudents.includes(student.name)) {
                    const option = document.createElement('option');
                    option.value = student.name;
                    option.dataset.team = student.team;
                    option.textContent = student.name;
                    select.appendChild(option);
                }
            });
        }
        
        // Add student to daily treasury
        function addStudentToDaily() {
            const select = document.getElementById('studentSelect');
            const studentName = select.value;
            
            if (studentName && !dailyStudents.includes(studentName)) {
                dailyStudents.push(studentName);
                dailyTreasury[studentName] = dailyTreasury[studentName] || 0;
                
                // Save to localStorage
                localStorage.setItem('dailyStudents', JSON.stringify(dailyStudents));
                localStorage.setItem('dailyTreasury', JSON.stringify(dailyTreasury));
                
                // Refresh display
                renderDailyStudents();
                populateStudentDropdown();
                
                // Reset dropdown
                select.value = '';
            }
        }
        
// Function to add entire class to daily list
// Function to add entire class to daily list
function addClassToDaily() {
    const select = document.getElementById('classSelect');
    const className = select.value;
    
    console.log('=== ADD CLASS TO DAILY DEBUG ===');
    console.log('Selected class:', className);
    console.log('Current dailyStudents:', dailyStudents);
    
    if (!className) {
        showToast('Please select a class first!');
        return;
    }
    
    const conquestData = localStorage.getItem('conquestTeamData');
    if (!conquestData) {
        showToast('No student data found!');
        return;
    }
    
    const teamData = JSON.parse(conquestData);
    console.log('Loaded teamData:', teamData);
    
    let addedCount = 0;
    let skippedCount = 0;
    let totalStudentsChecked = 0;
    
    // Loop through all teams and students
    Object.entries(teamData).forEach(([teamKey, team]) => {
        console.log(`Checking team: ${teamKey}`);
        
        if (!team.students) {
            console.log(`No students array in team ${teamKey}`);
            return;
        }
        
        team.students.forEach(student => {
            totalStudentsChecked++;
            console.log(`Checking student: ${student.name}, Classes:`, student.classes);
            
            // Skip if no classes array
            if (!student.classes) {
                console.log(`- No classes array for ${student.name}`);
                return;
            }
            
            // Check if student is in the selected class
            const isInClass = student.classes.some(c => {
                const matches = c.toLowerCase() === className.toLowerCase();
                console.log(`  - Comparing "${c}" with "${className}": ${matches}`);
                return matches;
            });
            
            if (isInClass && student.name !== 'Donation') {
                console.log(`‚úì ${student.name} is in class ${className}`);
                
                if (!dailyStudents.includes(student.name)) {
                    dailyStudents.push(student.name);
                    dailyTreasury[student.name] = dailyTreasury[student.name] || 0;
                    addedCount++;
                    console.log(`  ‚Üí Added to daily list`);
                } else {
                    skippedCount++;
                    console.log(`  ‚Üí Already in daily list`);
                }
            }
        });
    });
    
    console.log(`Total students checked: ${totalStudentsChecked}`);
    console.log(`Added: ${addedCount}, Skipped: ${skippedCount}`);
    
    // Save and update display
    if (addedCount > 0) {
        localStorage.setItem('dailyStudents', JSON.stringify(dailyStudents));
        localStorage.setItem('dailyTreasury', JSON.stringify(dailyTreasury));
        renderDailyStudents();
        populateStudentDropdown();
    }
    
    // Reset dropdown
    select.value = '';
    
    // Show result message
    if (addedCount > 0 && skippedCount > 0) {
        showToast(`‚ú® Added ${addedCount} students! (${skippedCount} already in class)`);
    } else if (addedCount > 0) {
        showToast(`‚ú® Added ${addedCount} students to today's class!`);
    } else if (skippedCount > 0) {
        showToast('All students from this class are already added!');
    } else {
        showToast(`No students found for ${className.toUpperCase()}`);
        console.log('NO STUDENTS FOUND - Check the console output above');
    }
}
        
        // Remove student from daily treasury
        function removeStudentFromDaily(studentName) {
            const index = dailyStudents.indexOf(studentName);
            if (index > -1) {
                dailyStudents.splice(index, 1);
                delete dailyTreasury[studentName];
                
                // Save to localStorage
                localStorage.setItem('dailyStudents', JSON.stringify(dailyStudents));
                localStorage.setItem('dailyTreasury', JSON.stringify(dailyTreasury));
                
                // Refresh display
                renderDailyStudents();
                populateStudentDropdown();
            }
        }
        
        // Get student's team
        function getStudentTeam(studentName) {
            const allStudents = loadAllStudentsFromConquest();
            const student = allStudents.find(s => s.name === studentName);
            return student ? student.team : null;
        }
        
        // Render daily students
        function renderDailyStudents() {
            const container = document.getElementById('dailyStudentsList');
            container.innerHTML = '';
            
            if (dailyStudents.length === 0) {
                container.innerHTML = '<div class="empty-state">No scholars in today\'s class yet.<br>Add students from the dropdown above.</div>';
                return;
            }
            
            dailyStudents.forEach(studentName => {
                const teamKey = getStudentTeam(studentName);
                const team = teamInfo[teamKey];
                
                const item = document.createElement('div');
                item.className = 'student-item';
                
                item.innerHTML = `
                    <div class="student-info">
                        <span class="student-name">${studentName}</span>
                        ${team ? `<span class="team-badge" style="color: ${team.color}; border-color: ${team.color};">${team.name}</span>` : ''}
                    </div>
                    <div class="coin-display">
                        <button class="points-btn" onclick="addPointsToStudent('${studentName}')" title="Add 10 points">
                            <span class="points-value">${dailyTreasury[studentName] || 0}</span>
                            <span class="coin-icon"></span>
                        </button>
                        <button class="remove-student" onclick="removeStudentFromDaily('${studentName}')" title="Remove from today's class">√ó</button>
                    </div>
                `;
                
                container.appendChild(item);
            });
        }
        
        // Update daily treasury
        function updateDailyTreasury(name, value) {
            dailyTreasury[name] = parseInt(value) || 0;
            localStorage.setItem('dailyTreasury', JSON.stringify(dailyTreasury));
        }
        
        // üîß CUSTOMIZE: Add points when clicking on student (default: 10 points)
        function addPointsToStudent(name) {
            const pointsToAdd = 10;                    // CUSTOMIZE: Change points per click
            dailyTreasury[name] = (dailyTreasury[name] || 0) + pointsToAdd;
            localStorage.setItem('dailyTreasury', JSON.stringify(dailyTreasury));
            renderDailyStudents();
            
            // Visual feedback
            const studentItems = document.querySelectorAll('.student-item');
            studentItems.forEach(item => {
                if (item.querySelector('.student-name').textContent === name) {
                    item.style.animation = 'pulse 0.3s ease';
                    const btn = item.querySelector('.points-btn');
                    if (btn) {
                        btn.style.animation = 'goldenGlow 0.3s ease';
                    }
                    setTimeout(() => {
                        item.style.animation = '';
                        if (btn) btn.style.animation = '';
                    }, 300);
                }
            });
        }
        
        // Save to Conquest
        function saveToConquest() {
            const conquestData = localStorage.getItem('conquestTeamData');
            if (!conquestData) {
                showToast('No Conquest data found!');
                return;
            }
            
            const teamData = JSON.parse(conquestData);
            let totalPointsAdded = 0;
            
            // Update each student's points in their team
            Object.entries(dailyTreasury).forEach(([studentName, dailyPoints]) => {
                if (dailyPoints > 0) {
                    // Find which team the student belongs to
                    for (const [teamKey, team] of Object.entries(teamData)) {
                        const studentIndex = team.students.findIndex(s => s.name === studentName);
                        if (studentIndex !== -1) {
                            // Add daily points to existing points
                            teamData[teamKey].students[studentIndex].points += dailyPoints;
                            totalPointsAdded += dailyPoints;
                            break;
                        }
                    }
                }
            });
            
            // Save updated conquest data
            localStorage.setItem('conquestTeamData', JSON.stringify(teamData));
            
            // Reset daily data
            dailyStudents = [];
            dailyTreasury = {};
            localStorage.removeItem('dailyStudents');
            localStorage.removeItem('dailyTreasury');
            
            // Refresh display
            renderDailyStudents();
            populateStudentDropdown();
            
            showToast(`‚ú® ${totalPointsAdded} points saved to Conquest! Daily treasury cleared.`);
        }
        
        // Reset daily treasury
        function resetDailyTreasury() {
            if (confirm('Are you sure you want to clear today\'s class? This will remove all students and their daily points!')) {
                // Clear the data
                dailyStudents = [];
                dailyTreasury = {};
                
                // Clear from localStorage
                localStorage.removeItem('dailyStudents');
                localStorage.removeItem('dailyTreasury');
                
                // Force a refresh of the display
                renderDailyStudents();
                populateStudentDropdown();
                
                showToast('Daily treasury cleared!');
            }
        }
        
        // Show toast notification
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);                                  // CUSTOMIZE: Toast display duration
        }
        
        // Go back function
        function goBack() {
            window.history.back();
        }
        
        // Close sidebars when clicking on a nav item
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', closeSidebars);
        });
        
        // Handle touch events for better tablet experience
        let touchStartX = 0;
        let touchEndX = 0;
        
        document.addEventListener('touchstart', e => {
            touchStartX = e.changedTouches[0].screenX;
        });
        
        document.addEventListener('touchend', e => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });
        
        function handleSwipe() {
            const swipeThreshold = 50;                 // CUSTOMIZE: Swipe sensitivity
            const leftSidebar = document.getElementById('leftSidebar');
            const rightSidebar = document.getElementById('rightSidebar');
            
            // Swipe right to open left sidebar
            if (touchEndX - touchStartX > swipeThreshold && touchStartX < 50) {
                leftSidebar.classList.add('expanded');
                document.getElementById('sidebarOverlay').classList.add('active');
            }
            
            // Swipe left to open right sidebar
            if (touchStartX - touchEndX > swipeThreshold && touchStartX > window.innerWidth - 50) {
                rightSidebar.classList.add('expanded');
                document.getElementById('sidebarOverlay').classList.add('active');
            }
        }
        
        // üîß CUSTOMIZE: Add floating particles (decorative effect)
        function createParticles() {
            const particleCount = 20;                  // CUSTOMIZE: Number of particles
            const particleSymbols = ['‚ú¶', '‚óÜ', '‚ùã', '‚úß']; // CUSTOMIZE: Particle symbols
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                particle.innerHTML = particleSymbols[Math.floor(Math.random() * particleSymbols.length)];
                particle.style.color = '#d4af37';
                particle.style.fontSize = Math.random() * 10 + 10 + 'px';
                document.body.appendChild(particle);
            }
        }
        
        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            // Re-initialize from localStorage to ensure sync
            dailyStudents = JSON.parse(localStorage.getItem('dailyStudents') || '[]');
            dailyTreasury = JSON.parse(localStorage.getItem('dailyTreasury') || '{}');
            
            populateStudentDropdown();
            renderDailyStudents();
            createParticles();
        });
        // TOEFL Speaking Type 3 Interactive System
    let currentPhase = 'ready';
    let timers = {};
    let audioPlayed = false;

    // Timer configurations
    const timerConfigs = {
        reading: 45,
        preparation: 30,
        speaking: 60
    };

    // Get elements
    const elements = {
        startButton: document.getElementById('startButton'),
        resetButton: document.getElementById('resetButton'),
        viewAnswerButton: document.getElementById('viewAnswerButton'),
        readingSection: document.getElementById('readingSection'),
        readingContent: document.getElementById('readingContent'),
        readingTimer: document.getElementById('readingTimer'),
        audioSection: document.getElementById('audioSection'),
        audioPlayer: document.getElementById('audioPlayer'),
        playButton: document.getElementById('playButton'),
        listeningTimer: document.getElementById('listeningTimer'),
        notesSection: document.getElementById('notesSection'),
        responseSection: document.getElementById('responseSection'),
        prepTimer: document.getElementById('prepTimer'),
        recordButton: document.getElementById('recordButton'),
        recordText: document.getElementById('recordText'),
        speakTimer: document.getElementById('speakTimer'),
        instructionsOverlay: document.getElementById('instructionsOverlay'),
        steps: {
            step1: document.getElementById('step1'),
            step2: document.getElementById('step2'),
            step3: document.getElementById('step3'),
            step4: document.getElementById('step4')
        }
    };

    // Close instructions
    function closeInstructions() {
        elements.instructionsOverlay.style.display = 'none';
    }

    // Format time for display
    function formatTime(seconds) {
        const mins = Math.floor(seconds / 60);
        const secs = seconds % 60;
        return `${mins}:${secs.toString().padStart(2, '0')}`;
    }

    // Update timer display
    function updateTimerDisplay(element, seconds, total) {
        element.textContent = formatTime(seconds);
        
        // Add warning/danger classes
        const percentage = (seconds / total) * 100;
        element.classList.remove('warning', 'danger');
        
        if (percentage <= 20) {
            element.classList.add('danger');
        } else if (percentage <= 40) {
            element.classList.add('warning');
        }
    }

    // Start timer
    function startTimer(duration, element, callback) {
        let timeLeft = duration;
        updateTimerDisplay(element, timeLeft, duration);
        
        const timer = setInterval(() => {
            timeLeft--;
            updateTimerDisplay(element, timeLeft, duration);
            
            if (timeLeft <= 0) {
                clearInterval(timer);
                if (callback) callback();
            }
        }, 1000);
        
        return timer;
    }

    // Update progress steps
    function updateProgress(activeStep) {
        Object.values(elements.steps).forEach(step => {
            step.classList.remove('active', 'completed');
        });
        
        let found = false;
        Object.values(elements.steps).forEach(step => {
            if (found) return;
            if (step.id === activeStep) {
                step.classList.add('active');
                found = true;
            } else {
                step.classList.add('completed');
            }
        });
    }

    // Start activity
    function startActivity() {
        elements.startButton.style.display = 'none';
        elements.resetButton.style.display = 'inline-block';
        
        // Start reading phase
        startReadingPhase();
    }

    // Reading phase
    function startReadingPhase() {
        currentPhase = 'reading';
        updateProgress('step1');
        
        elements.readingContent.style.display = 'block';
        elements.readingTimer.style.display = 'block';
        
        showToast('You have 45 seconds to read the passage');
        
        timers.reading = startTimer(timerConfigs.reading, elements.readingTimer, () => {
            endReadingPhase();
        });
    }

    // End reading phase
    function endReadingPhase() {
        elements.readingContent.style.display = 'none';
        elements.readingTimer.style.display = 'none';
        
        // Start listening phase
        startListeningPhase();
    }

    // Listening phase
    function startListeningPhase() {
        currentPhase = 'listening';
        updateProgress('step2');
        
        elements.playButton.style.display = 'flex';
        elements.listeningTimer.style.display = 'block';
        
        showToast('Click the play button to listen to the conversation');
        
    
    }

    // Play audio
    function playAudio() {
        if (audioPlayed) return;
        
        audioPlayed = true;
        elements.playButton.style.display = 'none';
        elements.audioPlayer.play();
        
        elements.audioPlayer.addEventListener('ended', () => {
            endListeningPhase();
        });
    }

    // End listening phase
    function endListeningPhase() {
        elements.listeningTimer.textContent = 'Completed';
        
        // Start preparation phase
        startPreparationPhase();
    }

    // Preparation phase
    function startPreparationPhase() {
        currentPhase = 'preparation';
        updateProgress('step3');
        
        elements.responseSection.classList.add('active');
        elements.prepTimer.style.display = 'block';
        
        showToast('You have 30 seconds to prepare your response');
        
        timers.preparation = startTimer(timerConfigs.preparation, elements.prepTimer, () => {
            endPreparationPhase();
        });
    }

    // End preparation phase
    function endPreparationPhase() {
        elements.prepTimer.style.display = 'none';
        
        // Start speaking phase
        startSpeakingPhase();
    }

    // Speaking phase
    function startSpeakingPhase() {
        currentPhase = 'speaking';
        updateProgress('step4');
        
        elements.recordButton.style.display = 'flex';
        elements.speakTimer.style.display = 'block';
        
        showToast('You have 60 seconds to give your response');
        
        // Auto-start recording
        setTimeout(() => {
            startRecording();
        }, 1000);
    }

    // Start recording
    function startRecording() {
        elements.recordButton.classList.add('recording');
        elements.recordText.textContent = 'Recording...';
        
        timers.speaking = startTimer(timerConfigs.speaking, elements.speakTimer, () => {
            endSpeakingPhase();
        });
    }

    // End speaking phase
    function endSpeakingPhase() {
        elements.recordButton.classList.remove('recording');
        elements.recordText.textContent = 'Complete';
        
        currentPhase = 'complete';
        elements.viewAnswerButton.style.display = 'inline-block';
        
        showToast('Activity completed! Well done!');
        
        // Show completion message
        setTimeout(() => {
            showSampleAnswer();
        }, 2000);
    }

    // Show sample answer
    function showSampleAnswer() {
        const sampleAnswer = `
            <div class="instructions-overlay" style="display: flex;">
                <div class="instructions-content">
                    <button class="close-instructions" onclick="this.parentElement.parentElement.style.display='none'">√ó</button>
                    <h2>Sample Answer</h2>
                    <div style="color: #d4af37; font-size: 16px; line-height: 1.8; margin-top: 20px;">
                        <p style="margin-bottom: 15px;">
                            According to the notice, the university will extend the library's hours during finals week. The man thinks that the change in library hours will cause two major problems.
                        </p>
                        <p style="margin-bottom: 15px;">
                            First, he says that students working in the library will have less time to study. This is because they will have to work more hours to meet the greater student needs at the library.
                        </p>
                        <p style="margin-bottom: 15px;">
                            Second, he points out that some students may not make it to work because they must study for exams. If this occurs, then other students have to make up for that time. Or, another student would have to work on their day off.
                        </p>
                    </div>
                    <div style="text-align: center; margin-top: 30px;">
                        <button class="control-button" onclick="this.parentElement.parentElement.parentElement.style.display='none'">Close</button>
                    </div>
                </div>
            </div>
        `;
        
        document.body.insertAdjacentHTML('beforeend', sampleAnswer);
    }

    // Reset activity
    function resetActivity() {
        // Clear all timers
        Object.values(timers).forEach(timer => clearInterval(timer));
        timers = {};
        
        // Reset variables
        currentPhase = 'ready';
        audioPlayed = false;
        
        // Reset UI
        elements.startButton.style.display = 'inline-block';
        elements.resetButton.style.display = 'none';
        elements.viewAnswerButton.style.display = 'none';
        elements.readingContent.style.display = 'none';
        elements.readingTimer.style.display = 'none';
        elements.playButton.style.display = 'none';
        elements.listeningTimer.style.display = 'none';
        elements.responseSection.classList.remove('active');
        elements.prepTimer.style.display = 'none';
        elements.recordButton.style.display = 'none';
        elements.speakTimer.style.display = 'none';
        elements.recordButton.classList.remove('recording');
        elements.recordText.textContent = 'REC';
        
        // Reset progress
        updateProgress('step1');
        
        // Reset audio
        elements.audioPlayer.currentTime = 0;
        
        // Clear notes
        document.getElementById('readingNotes').value = '';
        document.getElementById('conversationNotes').value = '';
        
        showToast('Activity reset. Click Start to begin again.');
    }

    // Show toast notification
    function showToast(message) {
        const existingToast = document.getElementById('activityToast');
        if (existingToast) {
            existingToast.remove();
        }
        
        const toast = document.createElement('div');
        toast.id = 'activityToast';
        toast.className = 'toast show';
        toast.textContent = message;
        toast.style.cssText = `
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #d4af37 0%, #b8860b 100%);
            color: #1a0f0a;
            padding: 15px 30px;
            border-radius: 30px;
            font-weight: bold;
            box-shadow: 0 5px 20px rgba(212, 175, 55, 0.6);
            z-index: 1002;
            transition: opacity 0.3s ease;
        `;
        
        document.body.appendChild(toast);
        
        setTimeout(() => {
            toast.style.opacity = '0';
            setTimeout(() => toast.remove(), 300);
        }, 3000);
    }

    // Presentation Mode Variables
    let speakerTimerInterval = null;
    let speakerTimeLeft = 60;
    let currentSpeakerIndex = 0;
    let speakingOrder = [];

    // Presentation Mode Functions
    function togglePresentationMode() {
        const presentationMode = document.getElementById('presentationMode');
        const isActive = presentationMode.classList.contains('active');
        
        if (isActive) {
            presentationMode.classList.remove('active');
        } else {
            presentationMode.classList.add('active');
            updateSpeakingOrderDisplay();
        }
    }

    function closePresentationMode() {
        document.getElementById('presentationMode').classList.remove('active');
        stopSpeakerTimer();
    }

    // Speaker Timer Functions
    function startSpeakerTimer() {
        if (speakerTimerInterval) return;
        
        const timerDisplay = document.getElementById('speakerTimer');
        const startBtn = document.getElementById('startSpeakerTimer');
        const stopBtn = document.getElementById('stopSpeakerTimer');
        
        startBtn.style.display = 'none';
        stopBtn.style.display = 'inline-block';
        
        speakerTimerInterval = setInterval(() => {
            speakerTimeLeft--;
            updateSpeakerTimerDisplay();
            
            if (speakerTimeLeft <= 0) {
                stopSpeakerTimer();
                showToast('Time\'s up! Next speaker please.');
                nextSpeaker();
            }
        }, 1000);
    }

    function stopSpeakerTimer() {
        if (speakerTimerInterval) {
            clearInterval(speakerTimerInterval);
            speakerTimerInterval = null;
        }
        
        const startBtn = document.getElementById('startSpeakerTimer');
        const stopBtn = document.getElementById('stopSpeakerTimer');
        
        startBtn.style.display = 'inline-block';
        stopBtn.style.display = 'none';
    }

    function resetSpeakerTimer() {
        stopSpeakerTimer();
        speakerTimeLeft = 60;
        updateSpeakerTimerDisplay();
    }

    function updateSpeakerTimerDisplay() {
        const timerDisplay = document.getElementById('speakerTimer');
        const minutes = Math.floor(speakerTimeLeft / 60);
        const seconds = speakerTimeLeft % 60;
        
        timerDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        
        // Remove all classes first
        timerDisplay.classList.remove('warning', 'danger');
        
        // Add warning/danger classes
        if (speakerTimeLeft <= 10) {
            timerDisplay.classList.add('danger');
        } else if (speakerTimeLeft <= 20) {
            timerDisplay.classList.add('warning');
        }
    }

    // Random Order Generator Functions
    function generateRandomOrder() {
        // Get current daily students
        const dailyStudents = JSON.parse(localStorage.getItem('dailyStudents') || '[]');
        
        if (dailyStudents.length === 0) {
            showToast('No students in today\'s class! Add students from the sidebar first.');
            return;
        }
        
        // Shuffle the array
        speakingOrder = [...dailyStudents].sort(() => Math.random() - 0.5);
        currentSpeakerIndex = 0;
        
        // Update display
        updateSpeakingOrderDisplay();
        
        showToast(`Random order generated for ${speakingOrder.length} students!`);
    }

    function updateSpeakingOrderDisplay() {
        const orderList = document.getElementById('speakingOrderList');
        const dailyStudents = JSON.parse(localStorage.getItem('dailyStudents') || '[]');
        
        if (speakingOrder.length === 0 && dailyStudents.length === 0) {
            orderList.innerHTML = '<div class="empty-order">No students in today\'s class yet.<br>Add students from the sidebar first.</div>';
            return;
        }
        
        if (speakingOrder.length === 0 && dailyStudents.length > 0) {
            orderList.innerHTML = '<div class="empty-order">Click "Generate Random Order" to create speaking order.</div>';
            return;
        }
        
        orderList.innerHTML = '';
        
        speakingOrder.forEach((student, index) => {
            const orderItem = document.createElement('div');
            orderItem.className = 'order-item';
            if (index === currentSpeakerIndex) {
                orderItem.classList.add('current-speaker');
            }
            
            orderItem.innerHTML = `
                <div class="order-number">${index + 1}</div>
                <div class="order-name">${student}</div>
            `;
            
            orderList.appendChild(orderItem);
        });
    }

    function nextSpeaker() {
        if (speakingOrder.length === 0) return;
        
        currentSpeakerIndex++;
        if (currentSpeakerIndex >= speakingOrder.length) {
            currentSpeakerIndex = 0;
            showToast('All students have spoken! Starting from the beginning.');
        }
        
        updateSpeakingOrderDisplay();
        resetSpeakerTimer();
    }

    // Event listeners
    elements.startButton.addEventListener('click', startActivity);
    elements.resetButton.addEventListener('click', resetActivity);
    elements.playButton.addEventListener('click', playAudio);
    elements.viewAnswerButton.addEventListener('click', showSampleAnswer);

    // Event Listeners for Presentation Mode
    document.getElementById('presentationToggle').addEventListener('click', togglePresentationMode);
    document.getElementById('closePresentation').addEventListener('click', closePresentationMode);
    document.getElementById('startSpeakerTimer').addEventListener('click', startSpeakerTimer);
    document.getElementById('stopSpeakerTimer').addEventListener('click', stopSpeakerTimer);
    document.getElementById('resetSpeakerTimer').addEventListener('click', resetSpeakerTimer);
    document.getElementById('generateOrder').addEventListener('click', generateRandomOrder);

    // Add keyboard shortcuts for presentation mode
    document.addEventListener('keydown', (e) => {
        const presentationMode = document.getElementById('presentationMode');
        if (!presentationMode.classList.contains('active')) return;
        
        switch(e.key) {
            case ' ': // Spacebar
                e.preventDefault();
                if (speakerTimerInterval) {
                    stopSpeakerTimer();
                } else {
                    startSpeakerTimer();
                }
                break;
            case 'r': // R key
                e.preventDefault();
                resetSpeakerTimer();
                break;
            case 'n': // N key
                e.preventDefault();
                nextSpeaker();
                break;
            case 'Escape': // Escape key
                closePresentationMode();
                break;
        }
    });

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
        // Show instructions on first load
        setTimeout(() => {
            elements.instructionsOverlay.style.display = 'flex';
        }, 500);
        
        // Hide the stop button initially
        document.getElementById('stopSpeakerTimer').style.display = 'none';
    });
        
        /* ======================
           üîß CUSTOMIZATION QUICK REFERENCE
           ====================== 
           
           üé® VISUAL CUSTOMIZATION:
           - Colors: Search for color codes like #d4af37, #f4e4bc, #b8860b
           - Fonts: Change 'Cinzel' and 'Uncial Antiqua' to your preferred fonts
           - Animations: Adjust timing in @keyframes sections
           - Spacing: Modify padding, margin, and gap values
           
           üì± LAYOUT CUSTOMIZATION:
           - Sidebar widths: Change .left-sidebar and .right-sidebar width values
           - Content grid: Modify grid-template-columns in .books-container and .sections-container
           - Responsive breakpoints: Adjust @media query pixel values
           
           üéØ FUNCTIONALITY CUSTOMIZATION:
           - Points per click: Change pointsToAdd in addPointsToStudent()
           - Toast duration: Modify setTimeout in showToast()
           - Team info: Update teamInfo object with your teams
           - Swipe sensitivity: Adjust swipeThreshold in handleSwipe()
           
           üìä DATA INTEGRATION:
           - Student data: Stored in localStorage 'conquestTeamData'
           - Daily tracking: Uses 'dailyStudents' and 'dailyTreasury' keys
           - Team structure: Expects teams with students arrays
           
           üîó NAVIGATION CUSTOMIZATION:
           - Add menu items: Insert <a class="nav-item" href="...">Item</a> in left sidebar
           - Add books: Insert <a class="book" href="..."><div class="book-spine">Title</div></a>
           - Add sections: Insert <a class="section-card" href="...">Card content</a>
           
           üí° QUICK TIPS:
           - Use "CUSTOMIZE:" comments to find key customization points
           - Test responsive design on different screen sizes
           - Backup localStorage data before making changes
           - Use browser dev tools to test color and spacing changes
        */
    </script>
</body>
</html>
