<!DOCTYPE html>
<!--
==============================================================================
📚 DEBATE SECTION - STRUCTURED DEBATE PRACTICE
==============================================================================

This page provides tools for structured debate practice including:
1. Formal debate formats
2. Argument construction tools
3. Timer for speaking periods
4. Topic generation

==============================================================================
-->
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Medieval Library - Debate</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Uncial+Antiqua&display=swap"
      rel="stylesheet"
    />
    <style>
      /* Sidebar Styles from Template */
      .sidebar-toggle {
        position: fixed;
        width: 50px;
        height: 120px;
        background: linear-gradient(180deg, #2a1810 0%, #1a0f0a 100%);
        border: 2px solid #8b6914;
        color: #d4af37;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        writing-mode: vertical-rl;
        text-orientation: mixed;
        font-family: "Cinzel", serif;
        font-size: 16px;
        transition: all 0.3s ease;
        z-index: 99;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
      }

      .left-toggle {
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        border-radius: 0 10px 10px 0;
        border-left: none;
      }

      .right-toggle {
        right: 0;
        top: 50%;
        transform: translateY(-50%);
        border-radius: 10px 0 0 10px;
        border-right: none;
      }

      .sidebar-toggle:hover {
        background: linear-gradient(180deg, #3a2418 0%, #2a1810 100%);
        box-shadow: 0 0 20px rgba(212, 175, 55, 0.5);
        width: 60px;
      }

      .sidebar-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        display: none;
        z-index: 98;
      }

      .sidebar-overlay.active {
        display: block;
      }

      .right-sidebar {
        width: 350px;
        background: linear-gradient(180deg, #2a1810 0%, #1a0f0a 100%);
        border-left: 2px solid #8b6914;
        box-shadow: -2px 0 10px rgba(0, 0, 0, 0.5);
        position: fixed;
        right: 0;
        top: 0;
        height: 100vh;
        overflow-y: auto;
        transition: transform 0.3s ease;
        z-index: 100;
        transform: translateX(350px);
      }

      .right-sidebar.expanded {
        transform: translateX(0);
      }

      .sidebar-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 20px;
        border-bottom: 1px solid #8b6914;
        position: relative;
      }

      .close-btn {
        background: rgba(139, 105, 20, 0.3);
        border: 1px solid #8b6914;
        color: #d4af37;
        width: 40px;
        height: 40px;
        border-radius: 5px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        font-size: 24px;
      }

      .close-btn:hover {
        background: rgba(212, 175, 55, 0.4);
        box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
      }

      .sidebar-content {
        padding: 20px;
      }

      .points-title {
        font-family: "Cinzel", serif;
        font-size: 24px;
        text-align: center;
        margin-bottom: 20px;
        color: #f4e4bc;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        border-bottom: 1px solid #8b6914;
        padding-bottom: 15px;
      }

      .section-subtitle {
        font-family: "Uncial Antiqua", cursive;
        font-size: 16px;
        color: #d4af37;
        text-align: center;
        margin-bottom: 15px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        position: relative;
        padding: 0 20px;
      }

      .add-section {
        background: rgba(139, 105, 20, 0.2);
        border: 1px solid #8b6914;
        border-radius: 5px;
        padding: 20px;
        margin-bottom: 0;
      }

      .dropdown-select {
        width: 100%;
        padding: 15px;
        background: rgba(139, 105, 20, 0.3);
        border: 2px solid #8b6914;
        color: #f4e4bc;
        font-family: "Cinzel", serif;
        font-size: 16px;
        border-radius: 5px;
        margin-bottom: 15px;
        min-height: 50px;
        -webkit-appearance: none;
        appearance: none;
        background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23d4af37' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: right 15px center;
        background-size: 20px;
        padding-right: 45px;
      }

      .add-student-to-daily {
        width: 100%;
        padding: 18px;
        background: linear-gradient(135deg, rgba(212, 175, 55, 0.3) 0%, rgba(139, 32, 32, 0.2) 100%);
        border: 2px solid #d4af37;
        color: #f4e4bc;
        font-family: "Cinzel", serif;
        font-size: 16px;
        font-weight: bold;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.3s ease;
        min-height: 55px;
      }

      .add-student-to-daily:hover {
        background: rgba(212, 175, 55, 0.5);
        box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
      }

      .student-item {
        background: linear-gradient(135deg, rgba(42, 30, 20, 0.9) 0%, rgba(52, 38, 26, 0.9) 100%);
        border: 2px solid #8b6914;
        border-radius: 5px;
        padding: 15px;
        position: relative;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
        margin-bottom: 10px;
      }

      .student-item:hover {
        background: linear-gradient(135deg, rgba(60, 40, 25, 0.9) 0%, rgba(70, 48, 31, 0.9) 100%);
        box-shadow: 0 0 20px rgba(212, 175, 55, 0.3), inset 0 2px 4px rgba(0, 0, 0, 0.3);
        border-color: #d4af37;
        transform: translateX(-2px);
      }

      .student-info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }

      .student-name {
        font-size: 16px;
        font-weight: bold;
        color: #f4e4bc;
      }

      .team-badge {
        font-size: 11px;
        padding: 3px 8px;
        border: 1px solid;
        border-radius: 3px;
        font-weight: normal;
        animation: subtleGlow 2s ease-in-out infinite;
      }

      @keyframes subtleGlow {
        0%, 100% { 
          filter: brightness(1) drop-shadow(0 0 3px currentColor); 
        }
        50% { 
          filter: brightness(1.2) drop-shadow(0 0 8px currentColor); 
        }
      }

      #dailyStudentsList {
        min-height: 200px;
        margin-bottom: 20px;
      }

      .empty-state {
        text-align: center;
        padding: 40px 20px;
        color: #b8860b;
        font-style: italic;
        background: rgba(139, 105, 20, 0.1);
        border-radius: 5px;
        border: 1px dashed #8b6914;
      }

      .divider-ornament {
        width: 100%;
        height: 30px;
        margin: 20px 0;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 30'%3E%3Cpath d='M0,15 Q50,5 100,15 T200,15' fill='none' stroke='%23d4af37' stroke-width='1' opacity='0.3'/%3E%3Ccircle cx='100' cy='15' r='3' fill='%23d4af37' opacity='0.5'/%3E%3Ccircle cx='80' cy='15' r='2' fill='%23d4af37' opacity='0.3'/%3E%3Ccircle cx='120' cy='15' r='2' fill='%23d4af37' opacity='0.3'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: center;
        background-size: contain;
        opacity: 0.5;
      }

      .toast {
        position: fixed;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%) translateY(100px);
        background: linear-gradient(135deg, #d4af37 0%, #b8860b 100%);
        color: #1a0f0a;
        padding: 15px 30px;
        border-radius: 30px;
        font-weight: bold;
        box-shadow: 0 5px 20px rgba(212, 175, 55, 0.6);
        opacity: 0;
        transition: all 0.3s ease;
        z-index: 1001;
      }

      .toast.show {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
      }
      /* ======================
           📋 GLOBAL RESET & BASE STYLES
           ====================== */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Cinzel", serif;
        background: #1a1a1a;
        color: #d4af37;
        min-height: 100vh;
        display: flex;
        background-image: radial-gradient(ellipse at top, #2a2a2a, transparent),
          radial-gradient(ellipse at bottom, #1a0f0a, transparent);
        overflow-x: hidden;
        position: relative;
        font-size: 12px;
      }

      /* Candlelight flickering effect */
      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(
            circle at 30% 50%,
            rgba(255, 147, 41, 0.15) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 70% 30%,
            rgba(255, 183, 77, 0.1) 0%,
            transparent 40%
          ),
          radial-gradient(
            circle at 50% 80%,
            rgba(255, 140, 0, 0.12) 0%,
            transparent 45%
          );
        pointer-events: none;
        mix-blend-mode: overlay;
        animation: flicker 4s ease-in-out infinite;
        z-index: 1;
      }

      @keyframes flicker {
        0%, 100% { opacity: 0.8; }
        25% { opacity: 0.9; }
        50% { opacity: 0.75; }
        75% { opacity: 0.85; }
      }

      /* Floating particles */
      .particle {
        position: fixed;
        pointer-events: none;
        opacity: 0;
        animation: float-up 15s linear infinite;
      }

      @keyframes float-up {
        0% {
          opacity: 0;
          transform: translateY(100vh) scale(0);
        }
        10% { opacity: 0.6; }
        90% { opacity: 0.6; }
        100% {
          opacity: 0;
          transform: translateY(-100vh) scale(1.5);
        }
      }

      /* Corner ornaments */
      .corner-ornament {
        position: fixed;
        width: 120px;
        height: 120px;
        opacity: 0.3;
        pointer-events: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='m10,10 Q50,20 90,10 Q80,50 90,90 Q50,80 10,90 Q20,50 10,10' fill='none' stroke='%23d4af37' stroke-width='1' opacity='0.5'/%3E%3Cpath d='m20,20 Q50,25 80,20 Q75,50 80,80 Q50,75 20,80 Q25,50 20,20' fill='none' stroke='%23d4af37' stroke-width='0.5'/%3E%3C/svg%3E");
        background-size: contain;
        z-index: 1;
      }

      .corner-top-left { top: 20px; left: 70px; }
      .corner-top-right { top: 20px; right: 70px; transform: scaleX(-1); }
      .corner-bottom-left { bottom: 20px; left: 70px; transform: scaleY(-1); }
      .corner-bottom-right { bottom: 20px; right: 70px; transform: scale(-1, -1); }

      /* Back Button */
      .back-button {
        position: fixed;
        top: 20px;
        left: 20px;
        background: rgba(212, 175, 55, 0.2);
        border: 2px solid #8b6914;
        color: #f4e4bc;
        padding: 12px 24px;
        font-family: "Cinzel", serif;
        font-size: 16px;
        font-weight: 600;
        text-decoration: none;
        cursor: pointer;
        transition: all 0.3s ease;
        border-radius: 5px;
        z-index: 100;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .back-button:hover {
        background: rgba(212, 175, 55, 0.4);
        box-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
      }

      /* Main Content */
      .main-content {
        flex: 1;
        padding: 40px 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100vh;
        margin: 0 70px;
      }

      .library-title {
        font-family: "Cinzel", serif;
        font-size: 48px;
        text-align: center;
        margin-bottom: 20px;
        color: #f4e4bc;
        text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8);
        animation: glow 2s ease-in-out infinite alternate;
        position: relative;
      }

      .library-title::before,
      .library-title::after {
        content: "⚔️";
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        font-size: 30px;
        color: #d4af37;
        animation: sparkle 3s ease-in-out infinite;
      }

      .library-title::before { left: -60px; }
      .library-title::after { right: -60px; animation-delay: 1.5s; }

      @keyframes sparkle {
        0%, 100% {
          opacity: 0.3;
          transform: translateY(-50%) scale(0.8) rotate(0deg);
        }
        50% {
          opacity: 1;
          transform: translateY(-50%) scale(1.2) rotate(180deg);
        }
      }

      @keyframes glow {
        from {
          text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8),
            0 0 20px rgba(212, 175, 55, 0.5);
        }
        to {
          text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8),
            0 0 30px rgba(212, 175, 55, 0.8);
        }
      }

      .subtitle {
        font-size: 20px;
        text-align: center;
        margin-bottom: 50px;
        color: #b8860b;
        position: relative;
        padding: 0 80px;
      }

      .subtitle::before,
      .subtitle::after {
        content: "";
        position: absolute;
        top: 50%;
        width: 60px;
        height: 1px;
        background: linear-gradient(90deg, transparent, #b8860b, transparent);
      }

      .subtitle::before { left: 0; }
      .subtitle::after { right: 0; }

      /* ======================
           🎯 DEBATE INTERFACE
           ====================== */

      .debate-container {
        width: 100%;
        max-width: 1200px;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 40px;
        margin-bottom: 40px;
      }

      /* Scoring System Styles */
      .scoring-panel {
        background: linear-gradient(135deg, #2a1810 0%, #1a0f0a 100%);
        border: 2px solid #8b6914;
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 30px;
        max-width: 1200px;
        width: 100%;
      }

      .speakers-section {
        margin-bottom: 30px;
      }

      .speakers-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .speaker-card {
        background: rgba(139, 105, 20, 0.2);
        border: 2px solid #8b6914;
        border-radius: 10px;
        padding: 20px;
        position: relative;
        transition: all 0.3s ease;
      }

      .speaker-card.active {
        border-color: #d4af37;
        box-shadow: 0 0 20px rgba(212, 175, 55, 0.5);
      }

      .speaker-name {
        font-size: 18px;
        font-weight: bold;
        color: #f4e4bc;
        margin-bottom: 10px;
      }

      .speaker-order {
        position: absolute;
        top: 10px;
        right: 10px;
        background: #d4af37;
        color: #1a0f0a;
        padding: 5px 10px;
        border-radius: 5px;
        font-weight: bold;
      }

      .score-categories {
        margin-top: 15px;
      }

      .score-category {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
        padding: 8px;
        background: rgba(139, 105, 20, 0.3);
        border-radius: 5px;
      }

      .score-label {
        color: #b8860b;
        font-size: 14px;
      }

      .score-input {
        width: 60px;
        padding: 5px;
        background: rgba(212, 175, 55, 0.2);
        border: 1px solid #8b6914;
        color: #f4e4bc;
        text-align: center;
        border-radius: 5px;
      }

      .total-score {
        margin-top: 15px;
        padding-top: 15px;
        border-top: 1px solid #8b6914;
        font-size: 20px;
        color: #d4af37;
        text-align: center;
      }

      .leaderboard {
        background: linear-gradient(135deg, #2a1810 0%, #1a0f0a 100%);
        border: 2px solid #8b6914;
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 30px;
        max-width: 1200px;
        width: 100%;
      }

      .leaderboard-title {
        font-size: 24px;
        color: #d4af37;
        text-align: center;
        margin-bottom: 20px;
      }

      .leaderboard-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px;
        background: rgba(139, 105, 20, 0.2);
        border-radius: 8px;
        margin-bottom: 10px;
      }

      .leaderboard-rank {
        font-size: 24px;
        color: #d4af37;
        font-weight: bold;
        margin-right: 15px;
      }

      .leaderboard-name {
        flex: 1;
        color: #f4e4bc;
      }

      .leaderboard-score {
        font-size: 20px;
        color: #81c784;
        font-weight: bold;
      }

      .debate-side {
        background: linear-gradient(135deg, #2a1810 0%, #1a0f0a 100%);
        border: 2px solid #8b6914;
        border-radius: 15px;
        padding: 30px;
        position: relative;
      }

      .side-pro {
        border-color: #2e7d32;
      }

      .side-con {
        border-color: #d32f2f;
      }

      .side-title {
        font-family: "Cinzel", serif;
        font-size: 24px;
        margin-bottom: 20px;
        text-align: center;
        color: #f4e4bc;
        position: relative;
        padding-bottom: 15px;
      }

      .side-title::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 50px;
        height: 2px;
        background: linear-gradient(90deg, transparent, #d4af37, transparent);
      }

      .pro-title { color: #81c784; }
      .con-title { color: #f48fb1; }

      .arguments-list {
        min-height: 200px;
        margin-bottom: 20px;
      }

      .argument-item {
        background: rgba(139, 105, 20, 0.2);
        border: 1px solid #8b6914;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 15px;
        color: #f4e4bc;
        position: relative;
      }

      .argument-item::before {
        content: "◆";
        position: absolute;
        left: -10px;
        top: 15px;
        color: #d4af37;
        font-size: 18px;
      }

      .add-argument {
        width: 100%;
        min-height: 60px;
        background: rgba(212, 175, 55, 0.2);
        border: 2px dashed #8b6914;
        border-radius: 8px;
        color: #d4af37;
        font-family: "Cinzel", serif;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 15px;
      }

      .add-argument:hover {
        background: rgba(212, 175, 55, 0.3);
        border-color: #d4af37;
      }

      .argument-input {
        width: 100%;
        min-height: 80px;
        background: rgba(139, 105, 20, 0.3);
        border: 2px solid #8b6914;
        border-radius: 8px;
        padding: 15px;
        color: #f4e4bc;
        font-family: "Cinzel", serif;
        font-size: 14px;
        resize: vertical;
        margin-bottom: 10px;
      }

      .argument-input::placeholder {
        color: #8b6914;
      }

      .argument-buttons {
        display: flex;
        gap: 10px;
      }

      .btn {
        padding: 10px 20px;
        border: 2px solid #8b6914;
        border-radius: 5px;
        font-family: "Cinzel", serif;
        font-size: 14px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .btn-add {
        background: rgba(46, 125, 50, 0.3);
        color: #81c784;
        border-color: #2e7d32;
      }

      .btn-add:hover {
        background: rgba(46, 125, 50, 0.5);
        box-shadow: 0 0 10px rgba(46, 125, 50, 0.5);
      }

      .btn-cancel {
        background: rgba(211, 47, 47, 0.3);
        color: #f48fb1;
        border-color: #d32f2f;
      }

      .btn-cancel:hover {
        background: rgba(211, 47, 47, 0.5);
        box-shadow: 0 0 10px rgba(211, 47, 47, 0.5);
      }

      /* ======================
           🕐 TIMER & CONTROLS
           ====================== */

      .debate-controls {
        width: 100%;
        max-width: 800px;
        background: linear-gradient(135deg, #2a1810 0%, #1a0f0a 100%);
        border: 2px solid #8b6914;
        border-radius: 15px;
        padding: 30px;
        text-align: center;
        margin-bottom: 30px;
      }

      .topic-section {
        margin-bottom: 30px;
      }

      .topic-display {
        background: rgba(139, 105, 20, 0.2);
        border: 2px solid #8b6914;
        border-radius: 10px;
        padding: 20px;
        margin: 20px 0;
        font-size: 18px;
        color: #f4e4bc;
        min-height: 80px;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
      }

      .timer-display {
        font-size: 48px;
        color: #d4af37;
        margin: 20px 0;
        font-family: "Cinzel", serif;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
      }

      .timer-label {
        font-size: 18px;
        color: #b8860b;
        margin-bottom: 10px;
      }

      .controls-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
        margin-top: 20px;
      }

      .control-btn {
        padding: 15px 25px;
        background: linear-gradient(135deg, rgba(212, 175, 55, 0.3) 0%, rgba(139, 32, 32, 0.2) 100%);
        border: 2px solid #d4af37;
        color: #f4e4bc;
        font-family: "Cinzel", serif;
        font-size: 16px;
        font-weight: bold;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .control-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(212, 175, 55, 0.5);
      }

      .control-btn:active {
        transform: translateY(0);
      }

      .randomize-btn {
        background: linear-gradient(135deg, rgba(156, 39, 176, 0.3) 0%, rgba(139, 32, 32, 0.2) 100%);
        border-color: #9c27b0;
      }

      .randomize-btn:hover {
        box-shadow: 0 6px 20px rgba(156, 39, 176, 0.5);
      }

      /* ======================
           📱 RESPONSIVE DESIGN
           ====================== */

      @media (max-width: 1024px) {
        .debate-container {
          grid-template-columns: 1fr;
          gap: 30px;
        }

        .library-title {
          font-size: 36px;
        }

        .subtitle {
          font-size: 18px;
        }
      }

      @media (max-width: 768px) {
        .main-content {
          margin: 0 20px;
          padding: 20px 10px;
        }

        .library-title {
          font-size: 28px;
        }

        .timer-display {
          font-size: 36px;
        }

        .controls-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <!-- Decorative Elements -->
    <div class="corner-ornament corner-top-left"></div>
    <div class="corner-ornament corner-top-right"></div>
    <div class="corner-ornament corner-bottom-left"></div>
    <div class="corner-ornament corner-bottom-right"></div>

    <!-- Back Button -->
    <button class="back-button" onclick="goBack()">Back</button>

    <!-- Sidebar Toggle -->
    <div class="sidebar-toggle right-toggle" onclick="toggleRightSidebar()">Treasury</div>
    
    <!-- Mobile overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="closeSidebars()"></div>

    <!-- Right Sidebar (Student Management) -->
    <div class="right-sidebar" id="rightSidebar">
      <div class="sidebar-header">
        <h2 class="points-title">Daily Treasury</h2>
        <button class="close-btn" onclick="toggleRightSidebar()">×</button>
      </div>
      <div class="sidebar-content">
        <!-- Section Title for Class Selection -->
        <h3 class="section-subtitle">Quick Add by Class</h3>

        <!-- Class Selection Section -->
        <div class="add-section add-class-section">
          <select class="dropdown-select class-select" id="classSelect">
            <option value="">Select a class...</option>
            <option value="m1">Monday 1 (m1)</option>
            <option value="m2">Monday 2 (m2)</option>
            <option value="tu1">Tuesday 1 (tu1)</option>
            <option value="tu2">Tuesday 2 (tu2)</option>
            <option value="w1">Wednesday 1 (w1)</option>
            <option value="w2">Wednesday 2 (w2)</option>
            <option value="th1">Thursday 1 (th1)</option>
            <option value="th2">Thursday 2 (th2)</option>
            <option value="s1">Saturday 1 (s1)</option>
            <option value="s2">Saturday 2 (s2)</option>
          </select>
          <button class="add-student-to-daily" onclick="addClassToDaily()">
            Add Entire Class
          </button>
        </div>

        <div class="divider-ornament"></div>

        <!-- Section Title for Individual Students -->
        <h3 class="section-subtitle">Add Individual Student</h3>

        <!-- Individual Student Selection -->
        <div class="add-section add-student-section">
          <select class="dropdown-select student-select" id="studentSelect">
            <option value="">Select a scholar...</option>
          </select>
          <button class="add-student-to-daily" onclick="addStudentToDaily()">
            Add to Daily Points
          </button>
        </div>

        <div class="divider-ornament"></div>

        <!-- Section Title for Active Students -->
        <h3 class="section-subtitle">Today's Scholars</h3>

        <!-- Daily Students List -->
        <div id="dailyStudentsList">
          <div class="empty-state">
            No scholars in today's class yet.<br />Add students from the options above.
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Title Section -->
      <h1 class="library-title">Debate Arena</h1>
      <p class="subtitle">Where ideas clash and eloquence reigns supreme</p>

      <!-- Scoring Panel -->
      <div class="scoring-panel">
        <h3 class="section-title">Speaker Management & Scoring</h3>
        <div class="controls-grid">
          <button class="control-btn randomize-btn" onclick="randomizeSpeakerOrder()">
            🎲 Randomize Speaker Order
          </button>
          <button class="control-btn" onclick="loadStudentsFromTreasury()">
            📚 Load Students from Treasury
          </button>
          <button class="control-btn" onclick="calculateFinalScores()">
            🏆 Calculate Final Scores
          </button>
        </div>
        <div class="speakers-section">
          <div class="speakers-grid" id="speakersGrid">
            <!-- Speaker cards will be added here -->
          </div>
        </div>
      </div>

      <!-- Leaderboard -->
      <div class="leaderboard" id="leaderboard" style="display: none;">
        <h3 class="leaderboard-title">🏆 Debate Leaderboard</h3>
        <div id="leaderboardContent">
          <!-- Leaderboard items will be added here -->
        </div>
      </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

      <!-- Debate Topic & Timer Controls -->
      <div class="debate-controls">
        <div class="topic-section">
          <h3 class="section-title">Debate Topic</h3>
          <div class="topic-display" id="topicDisplay">
            Click "Generate Topic" to start your debate
          </div>
        </div>

        <div class="timer-section">
          <div class="timer-label" id="timerLabel">Select a timer to begin</div>
          <div class="timer-display" id="timerDisplay">0:00</div>
        </div>

        <div class="controls-grid">
          <button class="control-btn" onclick="generateTopic()">Generate Topic</button>
          <button class="control-btn" onclick="startTimer(180)">Opening (3 min)</button>
          <button class="control-btn" onclick="startTimer(120)">Rebuttal (2 min)</button>
          <button class="control-btn" onclick="startTimer(90)">Closing (1.5 min)</button>
          <button class="control-btn" onclick="pauseTimer()">Pause</button>
          <button class="control-btn" onclick="resetTimer()">Reset</button>
        </div>
      </div>

      <!-- Debate Sides -->
      <div class="debate-container">
        <!-- Pro Side -->
        <div class="debate-side side-pro">
          <h3 class="side-title pro-title">Pro Arguments</h3>
          <div class="arguments-list" id="proArguments">
            <!-- Arguments will be added here -->
          </div>
          <button class="add-argument" onclick="showArgumentInput('pro')">
            + Add Pro Argument
          </button>
          <div class="argument-input-container" id="proInputContainer" style="display: none;">
            <textarea 
              class="argument-input" 
              id="proArgumentInput" 
              placeholder="Enter your pro argument here...">
            </textarea>
            <div class="argument-buttons">
              <button class="btn btn-add" onclick="addArgument('pro')">Add</button>
              <button class="btn btn-cancel" onclick="hideArgumentInput('pro')">Cancel</button>
            </div>
          </div>
        </div>

        <!-- Con Side -->
        <div class="debate-side side-con">
          <h3 class="side-title con-title">Con Arguments</h3>
          <div class="arguments-list" id="conArguments">
            <!-- Arguments will be added here -->
          </div>
          <button class="add-argument" onclick="showArgumentInput('con')">
            + Add Con Argument
          </button>
          <div class="argument-input-container" id="conInputContainer" style="display: none;">
            <textarea 
              class="argument-input" 
              id="conArgumentInput" 
              placeholder="Enter your con argument here...">
            </textarea>
            <div class="argument-buttons">
              <button class="btn btn-add" onclick="addArgument('con')">Add</button>
              <button class="btn btn-cancel" onclick="hideArgumentInput('con')">Cancel</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Debate Topics
      const debateTopics = [
        "Social media does more harm than good to society",
        "Homework should be banned in schools",
        "Technology is making us less social",
        "Fast food companies should be held responsible for obesity",
        "Video games cause violent behavior",
        "School uniforms should be mandatory",
        "Animals should not be used for entertainment",
        "The death penalty should be abolished",
        "Online learning is better than traditional classroom learning",
        "Artificial intelligence will replace human workers",
        "Plastic bags should be completely banned",
        "Teenagers should have the right to vote",
        "Space exploration is a waste of money",
        "Genetically modified foods are safe to eat",
        "Privacy is more important than security"
      ];

      // Timer variables
      let timerInterval;
      let timeLeft = 0;
      let isTimerRunning = false;

      // Argument storage
      let proArguments = [];
      let conArguments = [];

      // Speaker management
      let speakers = [];
      let currentSpeakerIndex = 0;

      // Scoring categories
      const SCORING_CATEGORIES = {
        argument: { label: 'Argument (content, example, explanation)', maxPoints: 3 },
        delivery: { label: 'Delivery', maxPoints: 2 },
        rebuttal: { label: 'Rebuttal (response, explanation, example)', maxPoints: 3 }
      };

      // Generate random debate topic
      function generateTopic() {
        const randomTopic = debateTopics[Math.floor(Math.random() * debateTopics.length)];
        document.getElementById('topicDisplay').textContent = randomTopic;
      }

      // Timer functions
      function startTimer(seconds) {
        if (isTimerRunning) {
          clearInterval(timerInterval);
        }
        
        timeLeft = seconds;
        isTimerRunning = true;
        
        // Update label based on timer duration
        const label = seconds === 180 ? "Opening Statement" : 
                     seconds === 120 ? "Rebuttal" : 
                     seconds === 90 ? "Closing Statement" : "Custom Timer";
        document.getElementById('timerLabel').textContent = label;
        
        updateTimerDisplay();
        
        timerInterval = setInterval(() => {
          timeLeft--;
          updateTimerDisplay();
          
          if (timeLeft <= 0) {
            clearInterval(timerInterval);
            isTimerRunning = false;
            alert("Time's up!");
          }
        }, 1000);
      }

      function pauseTimer() {
        if (isTimerRunning) {
          clearInterval(timerInterval);
          isTimerRunning = false;
        }
      }

      function resetTimer() {
        clearInterval(timerInterval);
        isTimerRunning = false;
        timeLeft = 0;
        document.getElementById('timerLabel').textContent = "Select a timer to begin";
        updateTimerDisplay();
      }

      function updateTimerDisplay() {
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        const display = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        document.getElementById('timerDisplay').textContent = display;
        
        // Change color based on time remaining
        const timerElement = document.getElementById('timerDisplay');
        if (timeLeft <= 30) {
          timerElement.style.color = '#f48fb1';
        } else if (timeLeft <= 60) {
          timerElement.style.color = '#ffb74d';
        } else {
          timerElement.style.color = '#d4af37';
        }
      }

      // Argument management functions
      function showArgumentInput(side) {
        document.getElementById(`${side}InputContainer`).style.display = 'block';
        document.getElementById(`${side}ArgumentInput`).focus();
      }

      function hideArgumentInput(side) {
        document.getElementById(`${side}InputContainer`).style.display = 'none';
        document.getElementById(`${side}ArgumentInput`).value = '';
      }

      function addArgument(side) {
        const input = document.getElementById(`${side}ArgumentInput`);
        const argumentText = input.value.trim();
        
        if (argumentText) {
          if (side === 'pro') {
            proArguments.push(argumentText);
          } else {
            conArguments.push(argumentText);
          }
          
          renderArguments(side);
          hideArgumentInput(side);
        }
      }

      function removeArgument(side, index) {
        if (side === 'pro') {
          proArguments.splice(index, 1);
        } else {
          conArguments.splice(index, 1);
        }
        renderArguments(side);
      }

      function renderArguments(side) {
        const container = document.getElementById(`${side}Arguments`);
        const arguments = side === 'pro' ? proArguments : conArguments;
        
        container.innerHTML = '';
        
        arguments.forEach((argument, index) => {
          const argumentDiv = document.createElement('div');
          argumentDiv.className = 'argument-item';
          argumentDiv.innerHTML = `
            ${argument}
            <button 
              onclick="removeArgument('${side}', ${index})" 
              style="position: absolute; top: 5px; right: 10px; background: none; border: none; color: #f48fb1; cursor: pointer; font-size: 18px;"
              title="Remove argument">
              ×
            </button>
          `;
          container.appendChild(argumentDiv);
        });
      }

      // Go back function
      function goBack() {
        window.history.back();
      }

      // Create floating particles
      function createParticles() {
        const particleCount = 15;
        const particleSymbols = ["⚔️", "🛡️", "💬", "💭"];

        for (let i = 0; i < particleCount; i++) {
          const particle = document.createElement("div");
          particle.className = "particle";
          particle.style.left = Math.random() * 100 + "%";
          particle.style.animationDelay = Math.random() * 15 + "s";
          particle.style.animationDuration = Math.random() * 10 + 10 + "s";
          particle.innerHTML = particleSymbols[Math.floor(Math.random() * particleSymbols.length)];
          particle.style.color = "#d4af37";
          particle.style.fontSize = Math.random() * 10 + 10 + "px";
          document.body.appendChild(particle);
        }
      }

      // Daily treasury management from template
      let dailyStudents = JSON.parse(localStorage.getItem("dailyStudents") || "[]");
      let dailyTreasury = JSON.parse(localStorage.getItem("dailyTreasury") || "{}");

      // Team information
      const teamInfo = {
        jiggleBoggle: { name: "Jiggle Boggle", color: "#81c784" },
        pinkie: { name: "Pinkie", color: "#f06292" },
        handsomeJoon: { name: "Handsome Joon", color: "#ff6b6b" },
        bomi: { name: "Bomi", color: "#ffd54f" },
        geniusIrene: { name: "Genius Irene", color: "#4fc3f7" },
        prettyEggplant: { name: "Pretty Eggplant", color: "#ba68c8" },
      };

      // Load all students from Conquest data
      function loadAllStudentsFromConquest() {
        const conquestData = localStorage.getItem("conquestTeamData");
        if (conquestData) {
          const teamData = JSON.parse(conquestData);
          const students = [];

          Object.entries(teamData).forEach(([teamKey, team]) => {
            team.students.forEach((student) => {
              if (student.name !== "Donation") {
                students.push({
                  name: student.name,
                  team: teamKey,
                  classes: student.classes || [],
                });
              }
            });
          });

          return students.sort((a, b) => a.name.localeCompare(b.name));
        }
        return [];
      }

      // Toggle right sidebar
      function toggleRightSidebar() {
        const sidebar = document.getElementById("rightSidebar");
        const overlay = document.getElementById("sidebarOverlay");
        const isExpanded = sidebar.classList.contains("expanded");

        if (isExpanded) {
          sidebar.classList.remove("expanded");
          overlay.classList.remove("active");
        } else {
          sidebar.classList.add("expanded");
          overlay.classList.add("active");
        }
      }

      // Close sidebars
      function closeSidebars() {
        document.getElementById("rightSidebar").classList.remove("expanded");
        document.getElementById("sidebarOverlay").classList.remove("active");
      }

      // Populate student dropdown
      function populateStudentDropdown() {
        const select = document.getElementById("studentSelect");
        select.innerHTML = '<option value="">Select a scholar...</option>';

        const allStudents = loadAllStudentsFromConquest();

        allStudents.forEach((student) => {
          if (!dailyStudents.includes(student.name)) {
            const option = document.createElement("option");
            option.value = student.name;
            option.dataset.team = student.team;
            option.textContent = student.name;
            select.appendChild(option);
          }
        });
      }

      // Add student to daily treasury
      function addStudentToDaily() {
        const select = document.getElementById("studentSelect");
        const studentName = select.value;

        if (studentName && !dailyStudents.includes(studentName)) {
          dailyStudents.push(studentName);
          dailyTreasury[studentName] = dailyTreasury[studentName] || 0;

          localStorage.setItem("dailyStudents", JSON.stringify(dailyStudents));
          localStorage.setItem("dailyTreasury", JSON.stringify(dailyTreasury));

          renderDailyStudents();
          populateStudentDropdown();
          select.value = "";
        }
      }

      // Add entire class to daily list
      function addClassToDaily() {
        const select = document.getElementById("classSelect");
        const className = select.value;

        if (!className) {
          showToast("Please select a class first!");
          return;
        }

        const conquestData = localStorage.getItem("conquestTeamData");
        if (!conquestData) {
          showToast("No student data found!");
          return;
        }

        const teamData = JSON.parse(conquestData);
        let addedCount = 0;
        let skippedCount = 0;

        Object.entries(teamData).forEach(([teamKey, team]) => {
          if (!team.students) return;

          team.students.forEach((student) => {
            if (!student.classes) return;

            const isInClass = student.classes.some((c) => {
              return c.toLowerCase() === className.toLowerCase();
            });

            if (isInClass && student.name !== "Donation") {
              if (!dailyStudents.includes(student.name)) {
                dailyStudents.push(student.name);
                dailyTreasury[student.name] = dailyTreasury[student.name] || 0;
                addedCount++;
              } else {
                skippedCount++;
              }
            }
          });
        });

        if (addedCount > 0) {
          localStorage.setItem("dailyStudents", JSON.stringify(dailyStudents));
          localStorage.setItem("dailyTreasury", JSON.stringify(dailyTreasury));
          renderDailyStudents();
          populateStudentDropdown();
        }

        select.value = "";

        if (addedCount > 0 && skippedCount > 0) {
          showToast(`✨ Added ${addedCount} students! (${skippedCount} already in class)`);
        } else if (addedCount > 0) {
          showToast(`✨ Added ${addedCount} students to today's class!`);
        } else if (skippedCount > 0) {
          showToast("All students from this class are already added!");
        } else {
          showToast(`No students found for ${className.toUpperCase()}`);
        }
      }

      // Get student's team
      function getStudentTeam(studentName) {
        const allStudents = loadAllStudentsFromConquest();
        const student = allStudents.find((s) => s.name === studentName);
        return student ? student.team : null;
      }

      // Render daily students
      function renderDailyStudents() {
        const container = document.getElementById("dailyStudentsList");
        container.innerHTML = "";

        if (dailyStudents.length === 0) {
          container.innerHTML = '<div class="empty-state">No scholars in today\'s class yet.<br>Add students from the dropdown above.</div>';
          return;
        }

        dailyStudents.forEach((studentName) => {
          const teamKey = getStudentTeam(studentName);
          const team = teamInfo[teamKey];

          const item = document.createElement("div");
          item.className = "student-item";

          item.innerHTML = `
            <div class="student-info">
              <span class="student-name">${studentName}</span>
              ${team ? `<span class="team-badge" style="color: ${team.color}; border-color: ${team.color};">${team.name}</span>` : ""}
            </div>
          `;

          container.appendChild(item);
        });
      }

      // Show toast notification
      function showToast(message) {
        const toast = document.getElementById("toast");
        toast.textContent = message;
        toast.classList.add("show");

        setTimeout(() => {
          toast.classList.remove("show");
        }, 3000);
      }

      // Load students from daily treasury
      function loadStudentsFromTreasury() {
        // Get students from daily treasury
        const dailyStudentsList = JSON.parse(localStorage.getItem("dailyStudents") || "[]");
        
        if (dailyStudentsList.length > 0) {
          speakers = dailyStudentsList.map((name, index) => ({
            id: index + 1,
            name: name,
            order: null,
            scores: {
              argument: 0,
              delivery: 0,
              rebuttal: 0
            },
            totalScore: 0
          }));
          showToast(`Loaded ${speakers.length} students from treasury!`);
        } else {
          showToast("No students in daily treasury. Add students from the sidebar!");
        }
        
        renderSpeakers();
      }

      // Randomize speaker order
      function randomizeSpeakerOrder() {
        if (speakers.length === 0) {
          alert('Please load students first!');
          return;
        }

        // Create array of indices and shuffle
        const indices = Array.from({ length: speakers.length }, (_, i) => i);
        for (let i = indices.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [indices[i], indices[j]] = [indices[j], indices[i]];
        }

        // Assign order to speakers
        indices.forEach((originalIndex, newOrder) => {
          speakers[originalIndex].order = newOrder + 1;
        });

        // Sort speakers by order
        speakers.sort((a, b) => a.order - b.order);
        currentSpeakerIndex = 0;
        
        renderSpeakers();
      }

      // Render speakers
      function renderSpeakers() {
        const grid = document.getElementById('speakersGrid');
        grid.innerHTML = '';

        speakers.forEach((speaker, index) => {
          const card = document.createElement('div');
          card.className = `speaker-card ${index === currentSpeakerIndex ? 'active' : ''}`;
          
          let scoreInputsHTML = '';
          for (const [key, category] of Object.entries(SCORING_CATEGORIES)) {
            scoreInputsHTML += `
              <div class="score-category">
                <span class="score-label">${category.label}</span>
                <input 
                  type="number" 
                  class="score-input" 
                  min="0" 
                  max="${category.maxPoints}" 
                  value="${speaker.scores[key]}"
                  onchange="updateScore(${speaker.id}, '${key}', this.value)"
                  placeholder="0-${category.maxPoints}"
                />
              </div>
            `;
          }

          card.innerHTML = `
            <div class="speaker-name">${speaker.name}</div>
            ${speaker.order ? `<div class="speaker-order">#${speaker.order}</div>` : ''}
            <div class="score-categories">
              ${scoreInputsHTML}
            </div>
            <div class="total-score">Total: ${speaker.totalScore} points</div>
          `;
          
          grid.appendChild(card);
        });
      }

      // Update score for a speaker
      function updateScore(speakerId, category, value) {
        const speaker = speakers.find(s => s.id === speakerId);
        if (!speaker) return;

        const maxPoints = SCORING_CATEGORIES[category].maxPoints;
        const score = Math.min(Math.max(0, parseInt(value) || 0), maxPoints);
        
        speaker.scores[category] = score;
        speaker.totalScore = Object.values(speaker.scores).reduce((sum, score) => sum + score, 0);
        
        renderSpeakers();
      }

      // Calculate and display final scores
      function calculateFinalScores() {
        if (speakers.length === 0) {
          alert('No speakers to calculate scores for!');
          return;
        }

        // Sort speakers by total score
        const sortedSpeakers = [...speakers].sort((a, b) => b.totalScore - a.totalScore);
        
        // Display leaderboard
        const leaderboard = document.getElementById('leaderboard');
        const leaderboardContent = document.getElementById('leaderboardContent');
        
        leaderboardContent.innerHTML = '';
        
        sortedSpeakers.forEach((speaker, index) => {
          const item = document.createElement('div');
          item.className = 'leaderboard-item';
          
          let medal = '';
          if (index === 0) medal = '🥇';
          else if (index === 1) medal = '🥈';
          else if (index === 2) medal = '🥉';
          
          item.innerHTML = `
            <div style="display: flex; align-items: center;">
              <span class="leaderboard-rank">${medal || (index + 1)}</span>
              <span class="leaderboard-name">${speaker.name}</span>
            </div>
            <span class="leaderboard-score">${speaker.totalScore} pts</span>
          `;
          
          leaderboardContent.appendChild(item);
        });
        
        leaderboard.style.display = 'block';
        leaderboard.scrollIntoView({ behavior: 'smooth' });
      }

      // Initialize on load
      document.addEventListener("DOMContentLoaded", () => {
        createParticles();
        renderArguments('pro');
        renderArguments('con');
        
        // Initialize daily treasury
        dailyStudents = JSON.parse(localStorage.getItem("dailyStudents") || "[]");
        dailyTreasury = JSON.parse(localStorage.getItem("dailyTreasury") || "{}");
        
        populateStudentDropdown();
        renderDailyStudents();
        loadStudentsFromTreasury();
      });
    </script>
  </body>
</html>